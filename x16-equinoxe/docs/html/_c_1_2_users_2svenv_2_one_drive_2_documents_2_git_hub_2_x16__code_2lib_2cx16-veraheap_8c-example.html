<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Equinoxe: C:/Users/svenv/OneDrive/Documents/GitHub/X16_Code/lib/cx16-veraheap.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Equinoxe
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">C:/Users/svenv/OneDrive/Documents/GitHub/X16_Code/lib/cx16-veraheap.c</div></div>
</div><!--header-->
<div class="contents">
<p >Create a heap segment in cx16 vera ram. For the given segment, a value between 0 and 15, define a heap in vera ram. <a class="el" href="struct_a.html">A</a> heap in vera ram is useful to dynamically load tiles or sprites without having to be concerned of memmory management anymore. The heap memory manager will manage the memory for you! The heapCeilVram and heapSizeVram define the heap in the VERA ram. An index needs to be created, and is managed by the heap memory manager, which is specified by the indexFloorBram and indexSizeBram parameters. Note that all these parameters are in packed format, and must be specified using the respective packed functions.</p>
<p >Create a heap segment in cx16 vera ram. For the given segment, a value between 0 and 15, define a heap in vera ram. <a class="el" href="struct_a.html">A</a> heap in vera ram is useful to dynamically load tiles or sprites without having to be concerned of memmory management anymore. The heap memory manager will manage the memory for you! The heapCeilVram and heapSizeVram define the heap in the VERA ram. An index needs to be created, and is managed by the heap memory manager, which is specified by the indexFloorBram and indexSizeBram parameters. Note that all these parameters are in packed format, and must be specified using the respective packed functions.</p>
<p >// Allocate the segment for the sprites in vram. heap_vram_packed vram_sprites = heap_segment_vram_ceil( 1, vram_petscii, vram_petscii, heap_bram_pack(2, (heap_ptr)0xA000), heap_size_pack(0x2000) );</p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cx16.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cx16-veralib_8h.html">cx16-veralib.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cx16-veraheap_8h.html">cx16-veraheap.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_SEGMENT</span></div>
<div class="line"><span class="preprocessor">#pragma data_seg(VeraHeap)</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><a id="_a0" name="_a0"></a><a class="code hl_struct" href="structvera__heap__map__t.html">vera_heap_map_t</a>  <a id="a1" name="a1"></a><a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>; <span class="comment">// The heap index is located in BRAM.</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#pragma data_seg(Data)</span></div>
<div class="line"><a id="_a2" name="_a2"></a><a class="code hl_struct" href="structvera__heap__segment__t.html">vera_heap_segment_t</a> <a id="a3" name="a3"></a><a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>; <span class="comment">// The segment managmeent is in main memory.</span></div>
<div class="line"> </div>
<div class="line">__mem <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a id="a4" name="a4"></a><a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a> = 0;</div>
<div class="line">__mem <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a id="a5" name="a5"></a><a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a> = 0;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_COLOR_FREE</span></div>
<div class="line">__mem <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> veraheap_color = 0;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> <a id="a6" name="a6"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a1edbebed62bd3831a1f0f3d2a24d4d2c">vera_heap_data_pack</a>(vram_bank_t vram_bank, vram_offset_t vram_offset)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> MAKEWORD(vram_bank&lt;&lt;5, 0) | (vram_offset&gt;&gt;3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> <a id="a7" name="a7"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a id="a8" name="a8"></a><a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> MAKEWORD(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a9" name="a9"></a><a class="code hl_variable" href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">data1</a>[index],<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a10" name="a10"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a24ac5da89967e3f8034dec5d15cff825">data0</a>[index]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">vram_bank_t <a id="a11" name="a11"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#af3f00b4da9113ccbf9606ccd4396f16b">vera_heap_data_get_bank</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a12" name="a12"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line">    vram_bank_t vram_bank = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">data1</a>[index] &gt;&gt; 5;</div>
<div class="line">    bank_pull_bram();</div>
<div class="line">    <span class="keywordflow">return</span> vram_bank;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">vram_offset_t <a id="a13" name="a13"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a13d756b011758f9318defc4629bafaf0">vera_heap_data_get_offset</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line">    vram_offset_t vram_offset = (vram_offset_t)<a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index) &lt;&lt; 3;</div>
<div class="line">    bank_pull_bram();</div>
<div class="line">    <span class="keywordflow">return</span> vram_offset;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a14" name="a14"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a657c44dad0f682a840c1c9052790d57e">vera_heap_set_data</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, vram_bank_t vram_bank, vram_offset_t vram_offset)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">data1</a>[index] = vram_bank &lt;&lt; 5 | BYTE1(vram_offset)&gt;&gt;3;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a24ac5da89967e3f8034dec5d15cff825">data0</a>[index] = (BYTE1(vram_offset)&gt;&gt;3  &amp; 0x11100000) | BYTE0(vram_offset&gt;&gt;3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a15" name="a15"></a><a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> data_packed)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">data1</a>[index] = BYTE1(data_packed);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a24ac5da89967e3f8034dec5d15cff825">data0</a>[index] = BYTE0(data_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a16" name="a16"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a511c4d7a4366a2b5e7f9bc1566b50925">vera_heap_set_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a17" name="a17"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] |= 0x80;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a18" name="a18"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab7e1256ff023c015dffcd48f0118a593">vera_heap_clear_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] &amp;= 0x7F;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a id="a19" name="a19"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab379dab4ab1addfd1307454cd51ee12a">vera_heap_is_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] &amp; 0x80) == 0x80;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a20" name="a20"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a83673b2984c69510aa1345273e7f97fe">vera_heap_size_pack</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> size)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a>)MAKEWORD(BYTE2(size)&lt;&lt;5, 0) | (WORD0(size) &gt;&gt; 3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a21" name="a21"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> MAKEWORD(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] &amp; 0x7F, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a22" name="a22"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a8198cf0e93fa62c16a34c2c32e058b2a">size0</a>[index]); <span class="comment">// Ignore free flag!</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> <a id="a23" name="a23"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a>)size &lt;&lt; 3; <span class="comment">// free flag is automatically removed</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-typedefs_8h.html#a53a9a69a0b4a07a0531e8841c7eb19c6">vera_heap_size_int_t</a> <a id="a24" name="a24"></a><a class="code hl_function" href="cx16-veraheap_8h.html#ab9a0e749baac7845889cc04aa05f13ff">vera_heap_get_size_int</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">    bank_pull_bram();</div>
<div class="line">    <span class="keywordflow">return</span> size &lt;&lt; 3;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> <a id="a25" name="a25"></a><a class="code hl_function" href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index) &lt;&lt; 3;</div>
<div class="line">    bank_pull_bram();</div>
<div class="line">    <span class="keywordflow">return</span> size;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a26" name="a26"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a90f53841c0003754c4e244f93e26c2fd">vera_heap_set_size</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> size)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">data1</a>[index] = BYTE1(size)&gt;&gt;3;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a24ac5da89967e3f8034dec5d15cff825">data0</a>[index] = (BYTE1(size)&gt;&gt;3 &amp; 0x11100000) | BYTE0(size&gt;&gt;3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a27" name="a27"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size_packed)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] &amp;= <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] &amp; 0x80;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">size1</a>[index] = BYTE1(size_packed) &amp; 0x7F; <span class="comment">// Ignore free flag.</span></div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a8198cf0e93fa62c16a34c2c32e058b2a">size0</a>[index] = BYTE0(size_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a28" name="a28"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a29" name="a29"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a039ff5523db558367d819012fa240887">next</a>[index];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a30" name="a30"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> next)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a039ff5523db558367d819012fa240887">next</a>[index] = next;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a31" name="a31"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a2a3ed3e592c47473a359b4e9f87760be">vera_heap_get_prev</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a32" name="a32"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a1dd9e3c18b90aba034fc1c2ea71d4936">prev</a>[index];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a33" name="a33"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> prev)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a1dd9e3c18b90aba034fc1c2ea71d4936">prev</a>[index] = prev;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a34" name="a34"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a35" name="a35"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a5c19602b7dfdda99fedffc371d79fca0">left</a>[index];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a36" name="a36"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> left)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a5c19602b7dfdda99fedffc371d79fca0">left</a>[index] = left;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a37" name="a37"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a id="a38" name="a38"></a><a class="code hl_variable" href="structvera__heap__map__t.html#a7679337b7d7f3746d718ddf6f5a16e1f">right</a>[index];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a39" name="a39"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> right)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a>.<a class="code hl_variable" href="structvera__heap__map__t.html#a7679337b7d7f3746d718ddf6f5a16e1f">right</a>[index] = right;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a40" name="a40"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> list, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> at) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(list == <a id="a41" name="a41"></a><a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <span class="comment">// empty list</span></div>
<div class="line">        list = index;</div>
<div class="line">        <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, index);</div>
<div class="line">        <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, index);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(at == <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        at=list;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> last = <a class="code hl_function" href="cx16-veraheap_8c.html#a2a3ed3e592c47473a359b4e9f87760be">vera_heap_get_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, at);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> first = at;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add index to list at last position.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, last);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, last, index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, first);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, first, index);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> list;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a42" name="a42"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> list, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index) </div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(list == <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <span class="comment">// empty list</span></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The free makes the list empty!</span></div>
<div class="line">    <span class="keywordflow">if</span>(list == <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, list)) {</div>
<div class="line">        list = 0; <span class="comment">// We initialize the start of the list to null.</span></div>
<div class="line">        <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>);</div>
<div class="line">        <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>; </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> next = <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> prev = <a class="code hl_function" href="cx16-veraheap_8c.html#a2a3ed3e592c47473a359b4e9f87760be">vera_heap_get_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO, why can&#39;t this be coded in one statement ...</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, prev, next);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, next, prev);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The free changes the first header of the list!</span></div>
<div class="line">    <span class="keywordflow">if</span>(index == list) { </div>
<div class="line">        list = <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, list);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> list;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a43" name="a43"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a878ccb0ebb2a45567fb3a62a333043aa">vera_heap_heap_insert_at</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="_a44" name="_a44"></a><a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> at, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a45" name="a45"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, at);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, size);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a46" name="a46"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]++;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a47" name="a47"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a989251e5854073d35cbc66026e11332d">vera_heap_heap_remove</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>) </div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]--;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a48" name="a48"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ac2c9255c3eab12662c04bc9edc453bdc">vera_heap_free_insert</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> data, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) </div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a49" name="a49"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], free_index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, data);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, size);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a511c4d7a4366a2b5e7f9bc1566b50925">vera_heap_set_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a50" name="a50"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]++;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a51" name="a51"></a><a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]--;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], free_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab7e1256ff023c015dffcd48f0118a593">vera_heap_clear_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a52" name="a52"></a><a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> idle_index) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a53" name="a53"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], idle_index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, idle_index, 0);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, idle_index, 0);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a54" name="a54"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">idleCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]++;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a55" name="a55"></a><a class="code hl_function" href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> idle_index) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">idleCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]--;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], idle_index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/* inline */</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a56" name="a56"></a><a class="code hl_function" href="cx16-veraheap_8c.html#af1ff4eb41167cd4684c74e14dfdfca1c">vera_heap_alloc_size_get</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> size) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a>)((<a class="code hl_function" href="cx16-veraheap_8c.html#a83673b2984c69510aa1345273e7f97fe">vera_heap_size_pack</a>(size-1) + 1));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a57" name="a57"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a6c4f4a1673a367a7fd8ab4b73adaf3e4">vera_heap_index_add</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO: Search idle list.</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(index != <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// The current header gets the current heap position handle.</span></div>
<div class="line">        index = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a58" name="a58"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#ab19986b63648d971bb24faa5ac79dcfa">index_position</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// We adjust to the next index position.</span></div>
<div class="line">        <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#ab19986b63648d971bb24faa5ac79dcfa">index_position</a> += 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO: out of memory check.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a59" name="a59"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a2c09a6de5c30e43cc3e5e5634af7084e">vera_heap_heap_add</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add a new index.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index = <a class="code hl_function" href="cx16-veraheap_8c.html#a6c4f4a1673a367a7fd8ab4b73adaf3e4">vera_heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The data handle of the header gets appointed with the current heap position handle.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a60" name="a60"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a5df2e97134beebe9abcc8b6781ac7fce">heap_offset</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, size); <span class="comment">// packed size!</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a878ccb0ebb2a45567fb3a62a333043aa">vera_heap_heap_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], size); <span class="comment">// TODO, not kosher</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Decrease the current heap position handle with the size needed to be newly allocated.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a5df2e97134beebe9abcc8b6781ac7fce">heap_offset</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] += size;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a61" name="a61"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a9339e4f4389411871b1c1eafb5fc5717">vera_heap_replace_free_with_heap</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> required_size) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> free_data = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_left = <a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_right = <a class="code hl_function" href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a> = free_index;</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a878ccb0ebb2a45567fb3a62a333043aa">vera_heap_heap_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>, required_size);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, free_data);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, free_left);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, free_right);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Replaced free index with heap index %03x size %05x.&quot;</span>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, <a class="code hl_function" href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a id="a62" name="a62"></a><a class="code hl_typedef" href="cx16-heap_8h.html#ac4ee471f0f66add0c8c48c88a5f36055">heap_index</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a63" name="a63"></a><a class="code hl_function" href="cx16-veraheap_8c.html#aa060ffb2b74faa0fbcce044d12466eb0">vera_heap_split_free_and_allocate</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> required_size) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The free block is reduced in size with the required size.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> free_data = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_size - required_size);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_data + required_size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// We create a new heap block with the required size.</span></div>
<div class="line">    <span class="comment">// The data is the offset in vram.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a> = <a class="code hl_function" href="cx16-veraheap_8c.html#a6c4f4a1673a367a7fd8ab4b73adaf3e4">vera_heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, free_data);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a878ccb0ebb2a45567fb3a62a333043aa">vera_heap_heap_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>, required_size);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> heap_left = <a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> heap_right = free_index;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, heap_left);</div>
<div class="line">    <span class="comment">// printf(&quot;\nright = %03x&quot;, heap_right);</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, heap_right);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, heap_left, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, heap_right, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Split free index %03x size %05x and allocate heap index %03x size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index), <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>, <a class="code hl_function" href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_typedef" href="cx16-heap_8h.html#ac4ee471f0f66add0c8c48c88a5f36055">heap_index</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a id="a64" name="a64"></a><a class="code hl_function" href="cx16-heap_8c.html#a816ba17a988728f4dd77f2866a48fbf1">vera_heap_can_split_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> required_size) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <span class="keywordflow">if</span>(free_size &gt; required_size) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;\n &gt; Can split free index %03x to size %05x, heap size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(free_size - required_size), <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(required_size));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span>(free_size == required_size) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;\n &gt; Can replace free index %03x with heap size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(required_size));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a65" name="a65"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a85078ca7ea2d6a429b44023b45461114">vera_heap_allocate</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> required_size) </div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(free_size &gt; required_size) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;\n &gt; Can split free index %03x to size %05x, heap size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(free_size - required_size), <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(required_size));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-veraheap_8c.html#aa060ffb2b74faa0fbcce044d12466eb0">vera_heap_split_free_and_allocate</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, required_size);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span>(free_size == required_size) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;\n &gt; Can replace free index %03x with heap size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(required_size));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-veraheap_8c.html#a9339e4f4389411871b1c1eafb5fc5717">vera_heap_replace_free_with_heap</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, required_size);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a66" name="a66"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ab403fdf10251a0079e602dd3c2f24de8">vera_heap_find_best_fit</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> requested_size) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(free_index == <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_end = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;, best fit is &quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> best_size = 0xFFFF;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> best_index = <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// O(n) search.</span></div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>(free_size &gt;= requested_size &amp;&amp; free_size &lt; best_size) {</div>
<div class="line">            best_size = free_size;</div>
<div class="line">            best_index = free_index;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span>(free_index != free_end);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;free index %03x size %05x.&quot;</span>, best_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(best_size) );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(requested_size &lt;= best_size) {</div>
<div class="line">        <span class="keywordflow">return</span> best_index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a67" name="a67"></a><a class="code hl_function" href="cx16-veraheap_8c.html#a9f27fe2679e3685c1855cece849c580f">vera_heap_can_coalesce_left</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> left_index = <a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> left_offset = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line">    <span class="keywordtype">bool</span> left_free = <a class="code hl_function" href="cx16-veraheap_8c.html#ab379dab4ab1addfd1307454cd51ee12a">vera_heap_is_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(left_free &amp;&amp; (left_offset &lt; <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a>)) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Left index %02x is free %s with offset %04x\n&quot;</span>, left_index, left_free?<span class="stringliteral">&quot;true&quot;</span>:<span class="stringliteral">&quot;false&quot;</span>, left_offset);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Can coalesce to the left with free index %03x.&quot;</span>, left_index);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        <span class="keywordflow">return</span> left_index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Cannot coalesce to the left.&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a68" name="a68"></a><a class="code hl_function" href="cx16-veraheap_8c.html#ad69c8a84524912f71f3ffef1b8c96884">heap_can_coalesce_right</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> right_index = <a class="code hl_function" href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> right_offset = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index);</div>
<div class="line">    <span class="keywordtype">bool</span> right_free = <a class="code hl_function" href="cx16-veraheap_8c.html#ab379dab4ab1addfd1307454cd51ee12a">vera_heap_is_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(right_free &amp;&amp; (<a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> &lt; right_offset)) {</div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Can coalesce to the right with free index %03x.&quot;</span>, right_index);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">        <span class="keywordflow">return</span> right_index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// A free_index is not found, we cannot coalesce.</span></div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Cannot coalesce to the right.&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a69" name="a69"></a><a class="code hl_function" href="cx16-veraheap_8c.html#af678bf56278342ac9ce12c3f603439eb">vera_heap_coalesce</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> left_index, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> right_index) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> right_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> left_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> left_offset = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_left = <a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_right = <a class="code hl_function" href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// We detach the left index from the free list and add it to the idle list.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index, free_left);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index, free_right);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_right, right_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_left, right_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, left_index, <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index, left_size + right_size);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index, left_offset);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a511c4d7a4366a2b5e7f9bc1566b50925">vera_heap_set_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, right_index);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Coalesce idling index %03x and expanding free index %03x.&quot;</span>, left_index, right_index);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> right_index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a70" name="a70"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#abfa4b357c25e6d8c5fc95db5ef3bea9d">vera_heap_bram_bank_init</a>(bram_bank_t bram_bank)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a> = bram_bank;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#ab19986b63648d971bb24faa5ac79dcfa">index_position</a> = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a id="a71" name="a71"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a6ddab09970612ba6303116c97ba2cfcb">vera_heap_segment_init</a>(</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a>   <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>,</div>
<div class="line">    vram_bank_t                 vram_bank_floor,</div>
<div class="line">    vram_offset_t               vram_offset_floor,</div>
<div class="line">    vram_bank_t                 vram_bank_ceil,</div>
<div class="line">    vram_offset_t               vram_offset_ceil</div>
<div class="line">    )</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO initialize segment to all zero</span></div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a72" name="a72"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a347b1a1ab7682360bbcd63b2df6a91d9">vram_bank_floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = vram_bank_floor;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a73" name="a73"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#ac037a113af4cae4470deddac7f87f0ce">vram_offset_floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = vram_offset_floor;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a74" name="a74"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a11dbd856290dbd56b25992cc07b95126">vram_bank_ceil</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = vram_bank_ceil;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a75" name="a75"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#ab250743d52eaa946657e9994036bfbdf">vram_offset_ceil</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = vram_offset_ceil;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a76" name="a76"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a3b0b3c064e6f9d7fdb01035459de0372">floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_function" href="cx16-veraheap_8c.html#a1edbebed62bd3831a1f0f3d2a24d4d2c">vera_heap_data_pack</a>(vram_bank_floor, vram_offset_floor);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a77" name="a77"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a086632befdf1c1e91c5fdc2586188821">ceil</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]  = <a class="code hl_function" href="cx16-veraheap_8c.html#a1edbebed62bd3831a1f0f3d2a24d4d2c">vera_heap_data_pack</a>(vram_bank_ceil, vram_offset_ceil);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a5df2e97134beebe9abcc8b6781ac7fce">heap_offset</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a086632befdf1c1e91c5fdc2586188821">ceil</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">    free_size -= <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a3b0b3c064e6f9d7fdb01035459de0372">floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">idleCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line"> </div>
<div class="line">    bram_bank_t bank_old = bank_get_bram();</div>
<div class="line">    bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#a6c4f4a1673a367a7fd8ab4b73adaf3e4">vera_heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line">    free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], free_index, free_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a3b0b3c064e6f9d7fdb01035459de0372">floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a086632befdf1c1e91c5fdc2586188821">ceil</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] - <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a3b0b3c064e6f9d7fdb01035459de0372">floor</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a511c4d7a4366a2b5e7f9bc1566b50925">vera_heap_set_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_index);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]++;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = free_index;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a78" name="a78"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a60031061b4807f15db7cfcc5ea2478d5">freeSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = free_size;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a id="a79" name="a79"></a><a class="code hl_variable" href="structvera__heap__segment__t.html#a1eab1340532b6d7f0f9e141b8a07b975">heapSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] = 0;</div>
<div class="line">    </div>
<div class="line">    bank_set_bram(bank_old);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a id="a80" name="a80"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aefebb9cce650893e990636c750e37e70">vera_heap_alloc</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> size) </div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Adjust given size to 8 bytes boundary (shift right with 3 bits).</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> packed_size = <a class="code hl_function" href="cx16-veraheap_8c.html#af1ff4eb41167cd4684c74e14dfdfca1c">vera_heap_alloc_size_get</a>(size);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DUMP</span></div>
<div class="line">    <a id="a81" name="a81"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, 0, 4);</div>
<div class="line">    gotoxy(0, 46);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Allocate segment %02x, size %05x&quot;</span>, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, size);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a> = <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#ab403fdf10251a0079e602dd3c2f24de8">vera_heap_find_best_fit</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, packed_size);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(free_index != <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a> = <a class="code hl_function" href="cx16-veraheap_8c.html#a85078ca7ea2d6a429b44023b45461114">vera_heap_allocate</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, packed_size);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a60031061b4807f15db7cfcc5ea2478d5">freeSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] -= packed_size;</div>
<div class="line">        <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1eab1340532b6d7f0f9e141b8a07b975">heapSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] += packed_size;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// No free index found! this means out of memory!</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;\n &gt; returning heap index %03x.\n&quot;</span>, <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DUMP</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, 40, 4);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_WAIT</span></div>
<div class="line">    <span class="keywordflow">while</span>(!getin());</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    bank_pull_bram();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_typedef" href="cx16-heap_8h.html#ac4ee471f0f66add0c8c48c88a5f36055">heap_index</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a82" name="a82"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a568f866b9d85bc45b9ac721458cad917">vera_heap_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index) </div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> free_size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DUMP</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, 0, 4);</div>
<div class="line">    gotoxy(0, 46);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n &gt; Free index %03x size %05x.&quot;</span>, free_index, <a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(free_size));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> free_offset = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO: only remove allocated indexes!</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#a989251e5854073d35cbc66026e11332d">vera_heap_heap_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap_8c.html#ac2c9255c3eab12662c04bc9edc453bdc">vera_heap_free_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_offset, free_size);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_left_index = <a class="code hl_function" href="cx16-veraheap_8c.html#a9f27fe2679e3685c1855cece849c580f">vera_heap_can_coalesce_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <span class="keywordflow">if</span>(free_left_index != <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#af678bf56278342ac9ce12c3f603439eb">vera_heap_coalesce</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_left_index, free_index);</div>
<div class="line">    } </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_right_index = <a class="code hl_function" href="cx16-veraheap_8c.html#ad69c8a84524912f71f3ffef1b8c96884">heap_can_coalesce_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <span class="keywordflow">if</span>(free_right_index != <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#af678bf56278342ac9ce12c3f603439eb">vera_heap_coalesce</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index, free_right_index);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">    #ifdef __VERAHEAP_COLOR_FREE</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-typedefs_8h.html#a53a9a69a0b4a07a0531e8841c7eb19c6">vera_heap_size_int_t</a> free_size_coalesced = <a class="code hl_function" href="cx16-veraheap_8h.html#ab9a0e749baac7845889cc04aa05f13ff">vera_heap_get_size_int</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa6f0204bb25518ba9584d36774c07947">vera_heap_bank_t</a> free_bank_coalesced = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#af3f00b4da9113ccbf9606ccd4396f16b">vera_heap_data_get_bank</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa6f0204bb25518ba9584d36774c07947">vera_heap_bank_t</a> free_offset_coalesced = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a13d756b011758f9318defc4629bafaf0">vera_heap_data_get_offset</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, free_index);</div>
<div class="line">    memset_vram(free_bank_coalesced, free_offset_coalesced, veraheap_color++, free_size_coalesced);</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DEBUG</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a60031061b4807f15db7cfcc5ea2478d5">freeSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] += free_size;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1eab1340532b6d7f0f9e141b8a07b975">heapSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>] -= free_size;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_DUMP</span></div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, 40, 4);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __VERAHEAP_WAIT</span></div>
<div class="line">    <span class="keywordflow">while</span>(!getin());</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    bank_pull_bram();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a83" name="a83"></a><a class="code hl_function" href="cx16-veraheap_8h.html#a728d1f9c56e78e52f2485c6bcb4781fb">vera_heap_dump_graphic_print</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> list = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (list == <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];   </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> end_index = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> <a id="a84" name="a84"></a><a class="code hl_variable" href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a> = 0;</div>
<div class="line"> </div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a> offset = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">        offset = offset &gt;&gt; 3;</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size = <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">        size = size &gt;&gt; 3;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> x = <a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a> + ((<span class="keywordtype">unsigned</span> char)(offset % 64));</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> y = <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a> + ((<span class="keywordtype">unsigned</span> char)(offset / 64));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p = 0; p &lt; size; p++) {</div>
<div class="line"> </div>
<div class="line">            gotoxy(x, y);</div>
<div class="line">            x++;</div>
<div class="line">            <span class="keywordflow">if</span>(p==0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%c&quot;</span>, 108);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%c&quot;</span>, 121);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>(!(x % 64)) {</div>
<div class="line">                y+=1;</div>
<div class="line">                x=0;</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        index = <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">        <span class="keywordflow">if</span>(++<a class="code hl_variable" href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a> &gt; <a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> &amp;&amp; index!=end_index) {</div>
<div class="line">            gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">            printf(<span class="stringliteral">&quot;ABORT i: %03x e:%03x, l:%03x, c=%x, hc=%x, b=%x\n&quot;</span>, index, end_index, list, <a class="code hl_variable" href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a>, bank_get_bram());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span> (index != end_index);</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    bank_pull_bram();</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a85" name="a85"></a><a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="keywordtype">char</span> prefix, <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> list, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a>)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (list == <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>) <span class="keywordflow">return</span>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> index = list; </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> prev_index = list;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> end_index = list;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a> = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">        printf(<span class="stringliteral">&quot;%03x %c  &quot;</span>, index, prefix);</div>
<div class="line">        printf(<span class="stringliteral">&quot;%x%04x %05x  &quot;</span>, <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#af3f00b4da9113ccbf9606ccd4396f16b">vera_heap_data_get_bank</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index), <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a13d756b011758f9318defc4629bafaf0">vera_heap_data_get_offset</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index), <a class="code hl_function" href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index));</div>
<div class="line">        printf(<span class="stringliteral">&quot;%03x  %03x  &quot;</span>, <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index), <a class="code hl_function" href="cx16-veraheap_8c.html#a2a3ed3e592c47473a359b4e9f87760be">vera_heap_get_prev</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index));</div>
<div class="line">        printf(<span class="stringliteral">&quot;%03x  %03x  &quot;</span>, <a class="code hl_function" href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index), <a class="code hl_function" href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index));</div>
<div class="line">        index = <a class="code hl_function" href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">        <span class="keywordflow">if</span>(++<a class="code hl_variable" href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a> &gt; <a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> &amp;&amp; index!=end_index) {</div>
<div class="line">            gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">            printf(<span class="stringliteral">&quot;ABORT i: %03x e:%03x, l:%03x\n&quot;</span>, index, end_index, list);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        prev_index = index;</div>
<div class="line">    } <span class="keywordflow">while</span> (index != end_index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a86" name="a86"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a447cbbc904306ccd5fe6805bf5a3333d">vera_heap_dump_stats</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">    printf(<span class="stringliteral">&quot;size  heap:%05x  free:%05x&quot;</span>, <a id="a87" name="a87"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3a1b50983b48d42e83cbc6b93d3350ef">vera_heap_alloc_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>), <a id="a88" name="a88"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a66815c3b40185c298956b2a8bc913fd0">vera_heap_free_size</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>));</div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">    printf(<span class="stringliteral">&quot;count  heap:%04u  free:%04u  idle:%04u&quot;</span>, <a id="a89" name="a89"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ace3c3a8bfccf7dbef51dc719e5d396d3">vera_heap_alloc_count</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>), <a id="a90" name="a90"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a24ce691729abc378d79c4c42a2c10d9b">vera_heap_free_count</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>), <a id="a91" name="a91"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ab7ab1c648af3c4ec465166ead18d09e9">vera_heap_idle_count</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>));</div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">    printf(<span class="stringliteral">&quot;list   heap:%03x   free:%03x   idle:%03x&quot;</span>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a92" name="a92"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a750fde3007c0d36b20fa6de7bb0a59fc">vera_heap_dump_index</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    bram_bank_t bank_old = bank_get_bram();</div>
<div class="line"> </div>
<div class="line">    bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">    printf(<span class="stringliteral">&quot;#   T  OFFS  SIZE   N    P    L    R&quot;</span>);</div>
<div class="line">    gotoxy(<a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a>, <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a>++);</div>
<div class="line">    printf(<span class="stringliteral">&quot;--- -  ----- -----  ---  ---  ---  ---&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="charliteral">&#39;I&#39;</span>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">idle_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">idleCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="charliteral">&#39;F&#39;</span>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">free_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="charliteral">&#39;H&#39;</span>, <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">heap_list</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>], <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>]);</div>
<div class="line"> </div>
<div class="line">    bank_set_bram(bank_old);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a93" name="a93"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a2511a72e731f8ffae94b9907f8b733a0">vera_heap_dump_xy</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> y) </div>
<div class="line">{</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a> = x;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a> = y;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> y)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a2511a72e731f8ffae94b9907f8b733a0">vera_heap_dump_xy</a>(x, y);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a447cbbc904306ccd5fe6805bf5a3333d">vera_heap_dump_stats</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line">    <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a750fde3007c0d36b20fa6de7bb0a59fc">vera_heap_dump_index</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a id="a94" name="a94"></a><a class="code hl_function" href="cx16-veraheap_8h.html#a966077fe1e9b76be7072e38bb70be0d6">vera_heap_has_free</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-veraheap-typedefs_8h.html#a53a9a69a0b4a07a0531e8841c7eb19c6">vera_heap_size_int_t</a> size_requested)</div>
<div class="line">{</div>
<div class="line">    bank_push_bram(); bank_set_bram(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">bram_bank</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Adjust given size to 8 bytes boundary (shift right with 3 bits).</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> packed_size = <a class="code hl_function" href="cx16-veraheap_8c.html#af1ff4eb41167cd4684c74e14dfdfca1c">vera_heap_alloc_size_get</a>(size_requested);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a> free_index = <a class="code hl_function" href="cx16-veraheap_8c.html#ab403fdf10251a0079e602dd3c2f24de8">vera_heap_find_best_fit</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, packed_size);</div>
<div class="line">    <span class="keywordtype">bool</span> has_free = (free_index != <a class="code hl_define" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a>);</div>
<div class="line"> </div>
<div class="line">    bank_pull_bram();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> has_free;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a66815c3b40185c298956b2a8bc913fd0">vera_heap_free_size</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> freeSize = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a60031061b4807f15db7cfcc5ea2478d5">freeSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a>)<a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(freeSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// TODO - make long</span></div>
<div class="line"><a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3a1b50983b48d42e83cbc6b93d3350ef">vera_heap_alloc_size</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> heapSize = <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1eab1340532b6d7f0f9e141b8a07b975">heapSize</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a>)<a class="code hl_function" href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a>(heapSize);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ace3c3a8bfccf7dbef51dc719e5d396d3">vera_heap_alloc_count</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">heapCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a24ce691729abc378d79c4c42a2c10d9b">vera_heap_free_count</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">freeCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ab7ab1c648af3c4ec465166ead18d09e9">vera_heap_idle_count</a>(<a class="code hl_typedef" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a>.<a class="code hl_variable" href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">idleCount</a>[<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="acx16-heap_8c_html_a4987d4b954c555b184aee545740ad105"><div class="ttname"><a href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_idle_insert(struct HEAP_SEGMENT *s, vera_heap_handle_t Index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:432</div></div>
<div class="ttc" id="acx16-heap_8c_html_a6ad18917bb88e69baea31d4139eed62e"><div class="ttname"><a href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a></div><div class="ttdeci">vera_heap_handle_t heap_idle_remove(struct HEAP_SEGMENT *s, vera_heap_handle_t Index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:440</div></div>
<div class="ttc" id="acx16-heap_8c_html_a816ba17a988728f4dd77f2866a48fbf1"><div class="ttname"><a href="cx16-heap_8c.html#a816ba17a988728f4dd77f2866a48fbf1">vera_heap_can_split_free</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_can_split_free(vera_heap_handle_t freeHeap, vera_heap_size_packed_t sizeRequired)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:534</div></div>
<div class="ttc" id="acx16-heap_8c_html_aad1c81df3ee2ee67a8c2d21a3b837e04"><div class="ttname"><a href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_free_remove(struct HEAP_SEGMENT *s, vera_heap_handle_t freeIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:427</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae46d850700331194e593e53157948003"><div class="ttname"><a href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a></div><div class="ttdeci">void vera_heap_dump_index_print(char prefix, vera_heap_handle_t list)</div><div class="ttdoc">Print an index list.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:988</div></div>
<div class="ttc" id="acx16-heap_8h_html_a03a67c4f3a1ae64cdc9b54974faab675"><div class="ttname"><a href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a></div><div class="ttdeci">unsigned int heap_count</div><div class="ttdoc">Counters.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:24</div></div>
<div class="ttc" id="acx16-heap_8h_html_a1bd2b521a63cb5d33664a103a8387d73"><div class="ttname"><a href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a></div><div class="ttdeci">unsigned int vera_heap_size_packed_t</div><div class="ttdoc">The size packed in a word, shifted 3 bits to the right.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:21</div></div>
<div class="ttc" id="acx16-heap_8h_html_a429e810cb6d47aa4975e70e8f31b7bbe"><div class="ttname"><a href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a></div><div class="ttdeci">unsigned int heap_offset</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:27</div></div>
<div class="ttc" id="acx16-heap_8h_html_ac4ee471f0f66add0c8c48c88a5f36055"><div class="ttname"><a href="cx16-heap_8h.html#ac4ee471f0f66add0c8c48c88a5f36055">heap_index</a></div><div class="ttdeci">struct HEAP_INDEX heap_index</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:91</div></div>
<div class="ttc" id="acx16-lru-cache-test1_8c_html_a0dab761c27eb6387ded42beeaa4d732c"><div class="ttname"><a href="cx16-lru-cache-test1_8c.html#a0dab761c27eb6387ded42beeaa4d732c">count</a></div><div class="ttdeci">volatile unsigned char count</div><div class="ttdef"><b>Definition:</b> cx16-lru-cache-test1.c:14</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a0a3da41d5ede037db90a7a00dcecc067"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a0a3da41d5ede037db90a7a00dcecc067">vera_heap_index_t</a></div><div class="ttdeci">unsigned char vera_heap_index_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:21</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a13d756b011758f9318defc4629bafaf0"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a13d756b011758f9318defc4629bafaf0">vera_heap_data_get_offset</a></div><div class="ttdeci">vram_offset_t vera_heap_data_get_offset(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:57</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a1e512dab113bfd2f473dae29ffa45c9d"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a1e512dab113bfd2f473dae29ffa45c9d">vera_heap_dump</a></div><div class="ttdeci">void vera_heap_dump(vera_heap_segment_index_t s, unsigned char x, unsigned char y)</div><div class="ttdoc">Print the heap memory manager statistics and dump the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:957</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a22407ea49a5e9d96ff5bd48288b36056"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a22407ea49a5e9d96ff5bd48288b36056">vera_heap_data_packed_t</a></div><div class="ttdeci">unsigned int vera_heap_data_packed_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:24</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a24ce691729abc378d79c4c42a2c10d9b"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a24ce691729abc378d79c4c42a2c10d9b">vera_heap_free_count</a></div><div class="ttdeci">unsigned int vera_heap_free_count(vera_heap_segment_index_t s)</div><div class="ttdoc">Return the amount of free records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:1031</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a2511a72e731f8ffae94b9907f8b733a0"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a2511a72e731f8ffae94b9907f8b733a0">vera_heap_dump_xy</a></div><div class="ttdeci">void vera_heap_dump_xy(unsigned char x, unsigned char y)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:946</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a3444846eaba3528013cd64fcc44ccf85"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3444846eaba3528013cd64fcc44ccf85">vera_heap_get_size_packed</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_get_size_packed(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:103</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a3a1b50983b48d42e83cbc6b93d3350ef"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a3a1b50983b48d42e83cbc6b93d3350ef">vera_heap_alloc_size</a></div><div class="ttdeci">vera_heap_size_t vera_heap_alloc_size(vera_heap_segment_index_t s)</div><div class="ttdoc">Return the size of allocated heap records of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:1008</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a4070f6ae4f0d5a7b129c97d75256823a"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4070f6ae4f0d5a7b129c97d75256823a">vera_heap_segment_index_t</a></div><div class="ttdeci">unsigned char vera_heap_segment_index_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:29</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a447cbbc904306ccd5fe6805bf5a3333d"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a447cbbc904306ccd5fe6805bf5a3333d">vera_heap_dump_stats</a></div><div class="ttdeci">void vera_heap_dump_stats(vera_heap_segment_index_t s)</div><div class="ttdoc">Print the heap memory manager statistics of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:913</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a4c37bb100e2650d4424958502d5f6a59"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a4c37bb100e2650d4424958502d5f6a59">vera_heap_segment</a></div><div class="ttdeci">vera_heap_segment_t vera_heap_segment</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:27</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a568f866b9d85bc45b9ac721458cad917"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a568f866b9d85bc45b9ac721458cad917">vera_heap_free</a></div><div class="ttdeci">void vera_heap_free(vera_heap_segment_index_t s, vera_heap_index_t handle)</div><div class="ttdoc">Free a memory block from the heap using the handle of allocated memory of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:747</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a66815c3b40185c298956b2a8bc913fd0"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a66815c3b40185c298956b2a8bc913fd0">vera_heap_free_size</a></div><div class="ttdeci">vera_heap_size_t vera_heap_free_size(vera_heap_segment_index_t s)</div><div class="ttdoc">Return the size of free heap of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:994</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a6ddab09970612ba6303116c97ba2cfcb"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a6ddab09970612ba6303116c97ba2cfcb">vera_heap_segment_init</a></div><div class="ttdeci">vera_heap_segment_index_t vera_heap_segment_init(vera_heap_segment_index_t s, vram_bank_t vram_bank_floor, vram_offset_t vram_offset_floor, vram_bank_t vram_bank_ceil, vram_offset_t vram_offset_ceil)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:632</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a750fde3007c0d36b20fa6de7bb0a59fc"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a750fde3007c0d36b20fa6de7bb0a59fc">vera_heap_dump_index</a></div><div class="ttdeci">void vera_heap_dump_index(vera_heap_segment_index_t s)</div><div class="ttdoc">Ddump the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:928</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a878ccb0ebb2a45567fb3a62a333043aa"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a878ccb0ebb2a45567fb3a62a333043aa">vera_heap_heap_insert_at</a></div><div class="ttdeci">vera_heap_index_t vera_heap_heap_insert_at(vera_heap_segment_index_t s, vera_heap_index_t heap_index, vera_heap_index_t at, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:256</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a93e81a071109beb12e8b23b964195f63"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a93e81a071109beb12e8b23b964195f63">vera_heap_index</a></div><div class="ttdeci">vera_heap_map_t vera_heap_index</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:24</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_a9b4f2f9d4d6919faf70c4b3607bb5c61"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#a9b4f2f9d4d6919faf70c4b3607bb5c61">vera_heap_size_t</a></div><div class="ttdeci">unsigned long vera_heap_size_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:26</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_aa6f0204bb25518ba9584d36774c07947"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa6f0204bb25518ba9584d36774c07947">vera_heap_bank_t</a></div><div class="ttdeci">unsigned char vera_heap_bank_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:18</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_aafd487f0e7bf4e1be740c7112994b5f1"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aafd487f0e7bf4e1be740c7112994b5f1">VERAHEAP_NULL</a></div><div class="ttdeci">#define VERAHEAP_NULL</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:32</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_ab7ab1c648af3c4ec465166ead18d09e9"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ab7ab1c648af3c4ec465166ead18d09e9">vera_heap_idle_count</a></div><div class="ttdeci">unsigned int vera_heap_idle_count(vera_heap_segment_index_t s)</div><div class="ttdoc">Return the amount of idle records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:1042</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_abfa4b357c25e6d8c5fc95db5ef3bea9d"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#abfa4b357c25e6d8c5fc95db5ef3bea9d">vera_heap_bram_bank_init</a></div><div class="ttdeci">void vera_heap_bram_bank_init(bram_bank_t bram_bank)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:603</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_ace3c3a8bfccf7dbef51dc719e5d396d3"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ace3c3a8bfccf7dbef51dc719e5d396d3">vera_heap_alloc_count</a></div><div class="ttdeci">unsigned int vera_heap_alloc_count(vera_heap_segment_index_t s)</div><div class="ttdoc">Return the amount of heap records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:1020</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_ad4c952644896409c07afe5383f204a81"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ad4c952644896409c07afe5383f204a81">vera_heap_get_data_packed</a></div><div class="ttdeci">vera_heap_data_packed_t vera_heap_get_data_packed(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:42</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_ae181d55ff8f1c3a076129b88e119f396"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a></div><div class="ttdeci">vera_heap_index_t vera_heap_list_remove(vera_heap_segment_index_t s, vera_heap_index_t list, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:225</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_aefebb9cce650893e990636c750e37e70"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aefebb9cce650893e990636c750e37e70">vera_heap_alloc</a></div><div class="ttdeci">vera_heap_index_t vera_heap_alloc(vera_heap_segment_index_t s, vera_heap_size_t size)</div><div class="ttdoc">Allocated a specified size of memory on the heap of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:693</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_af3f00b4da9113ccbf9606ccd4396f16b"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#af3f00b4da9113ccbf9606ccd4396f16b">vera_heap_data_get_bank</a></div><div class="ttdeci">vram_bank_t vera_heap_data_get_bank(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:48</div></div>
<div class="ttc" id="acx16-veraheap-typedefs_8h_html_a53a9a69a0b4a07a0531e8841c7eb19c6"><div class="ttname"><a href="cx16-veraheap-typedefs_8h.html#a53a9a69a0b4a07a0531e8841c7eb19c6">vera_heap_size_int_t</a></div><div class="ttdeci">unsigned int vera_heap_size_int_t</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-typedefs.h:30</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a1ddbde5bf2e0a08a7b5233a268699deb"><div class="ttname"><a href="cx16-veraheap_8c.html#a1ddbde5bf2e0a08a7b5233a268699deb">vera_heap_size_unpack</a></div><div class="ttdeci">vera_heap_size_t vera_heap_size_unpack(vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:108</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a1edbebed62bd3831a1f0f3d2a24d4d2c"><div class="ttname"><a href="cx16-veraheap_8c.html#a1edbebed62bd3831a1f0f3d2a24d4d2c">vera_heap_data_pack</a></div><div class="ttdeci">vera_heap_data_packed_t vera_heap_data_pack(vram_bank_t vram_bank, vram_offset_t vram_offset)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:36</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a2a3ed3e592c47473a359b4e9f87760be"><div class="ttname"><a href="cx16-veraheap_8c.html#a2a3ed3e592c47473a359b4e9f87760be">vera_heap_get_prev</a></div><div class="ttdeci">vera_heap_index_t vera_heap_get_prev(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:156</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a2c09a6de5c30e43cc3e5e5634af7084e"><div class="ttname"><a href="cx16-veraheap_8c.html#a2c09a6de5c30e43cc3e5e5634af7084e">vera_heap_heap_add</a></div><div class="ttdeci">vera_heap_index_t vera_heap_heap_add(vera_heap_segment_index_t s, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:331</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a42b46038e723399f9ad1475e9d3c3502"><div class="ttname"><a href="cx16-veraheap_8c.html#a42b46038e723399f9ad1475e9d3c3502">vera_heap_get_right</a></div><div class="ttdeci">vera_heap_index_t vera_heap_get_right(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:180</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a511c4d7a4366a2b5e7f9bc1566b50925"><div class="ttname"><a href="cx16-veraheap_8c.html#a511c4d7a4366a2b5e7f9bc1566b50925">vera_heap_set_free</a></div><div class="ttdeci">void vera_heap_set_free(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:81</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a5726e568d936d0f525e68f1b8c3eb9c4"><div class="ttname"><a href="cx16-veraheap_8c.html#a5726e568d936d0f525e68f1b8c3eb9c4">vera_heap_set_size_packed</a></div><div class="ttdeci">void vera_heap_set_size_packed(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_size_packed_t size_packed)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:136</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a657c44dad0f682a840c1c9052790d57e"><div class="ttname"><a href="cx16-veraheap_8c.html#a657c44dad0f682a840c1c9052790d57e">vera_heap_set_data</a></div><div class="ttdeci">void vera_heap_set_data(vera_heap_segment_index_t s, vera_heap_index_t index, vram_bank_t vram_bank, vram_offset_t vram_offset)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:68</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a6c4f4a1673a367a7fd8ab4b73adaf3e4"><div class="ttname"><a href="cx16-veraheap_8c.html#a6c4f4a1673a367a7fd8ab4b73adaf3e4">vera_heap_index_add</a></div><div class="ttdeci">vera_heap_index_t vera_heap_index_add(vera_heap_segment_index_t s)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:309</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a6d0cd9afd1afb4dca65932838951036f"><div class="ttname"><a href="cx16-veraheap_8c.html#a6d0cd9afd1afb4dca65932838951036f">vera_heap_get_next</a></div><div class="ttdeci">vera_heap_index_t vera_heap_get_next(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:144</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a7170464d4bcb62ac5f897a4de7c63077"><div class="ttname"><a href="cx16-veraheap_8c.html#a7170464d4bcb62ac5f897a4de7c63077">veraheap_dy</a></div><div class="ttdeci">__mem unsigned char veraheap_dy</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:30</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a7367e8ecd90958aac81ab96c1834f9d4"><div class="ttname"><a href="cx16-veraheap_8c.html#a7367e8ecd90958aac81ab96c1834f9d4">vera_heap_list_insert_at</a></div><div class="ttdeci">vera_heap_index_t vera_heap_list_insert_at(vera_heap_segment_index_t s, vera_heap_index_t list, vera_heap_index_t index, vera_heap_index_t at)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:195</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a83673b2984c69510aa1345273e7f97fe"><div class="ttname"><a href="cx16-veraheap_8c.html#a83673b2984c69510aa1345273e7f97fe">vera_heap_size_pack</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_size_pack(vera_heap_size_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:98</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a85078ca7ea2d6a429b44023b45461114"><div class="ttname"><a href="cx16-veraheap_8c.html#a85078ca7ea2d6a429b44023b45461114">vera_heap_allocate</a></div><div class="ttdeci">vera_heap_index_t vera_heap_allocate(vera_heap_segment_index_t s, vera_heap_index_t free_index, vera_heap_size_packed_t required_size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:438</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a8ebe8b24e13ffeabc69aa2f6790d0ebd"><div class="ttname"><a href="cx16-veraheap_8c.html#a8ebe8b24e13ffeabc69aa2f6790d0ebd">vera_heap_set_right</a></div><div class="ttdeci">void vera_heap_set_right(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_index_t right)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:186</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a90f53841c0003754c4e244f93e26c2fd"><div class="ttname"><a href="cx16-veraheap_8c.html#a90f53841c0003754c4e244f93e26c2fd">vera_heap_set_size</a></div><div class="ttdeci">void vera_heap_set_size(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_size_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:129</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a9339e4f4389411871b1c1eafb5fc5717"><div class="ttname"><a href="cx16-veraheap_8c.html#a9339e4f4389411871b1c1eafb5fc5717">vera_heap_replace_free_with_heap</a></div><div class="ttdeci">vera_heap_index_t vera_heap_replace_free_with_heap(vera_heap_segment_index_t s, vera_heap_index_t free_index, vera_heap_size_packed_t required_size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:352</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a95e4a1c9a0f603992d3ba518c5574526"><div class="ttname"><a href="cx16-veraheap_8c.html#a95e4a1c9a0f603992d3ba518c5574526">vera_heap_set_left</a></div><div class="ttdeci">void vera_heap_set_left(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_index_t left)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:174</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a989251e5854073d35cbc66026e11332d"><div class="ttname"><a href="cx16-veraheap_8c.html#a989251e5854073d35cbc66026e11332d">vera_heap_heap_remove</a></div><div class="ttdeci">void vera_heap_heap_remove(vera_heap_segment_index_t s, vera_heap_index_t heap_index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:264</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_a9f27fe2679e3685c1855cece849c580f"><div class="ttname"><a href="cx16-veraheap_8c.html#a9f27fe2679e3685c1855cece849c580f">vera_heap_can_coalesce_left</a></div><div class="ttdeci">vera_heap_index_t vera_heap_can_coalesce_left(vera_heap_segment_index_t s, vera_heap_index_t heap_index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:511</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_aa060ffb2b74faa0fbcce044d12466eb0"><div class="ttname"><a href="cx16-veraheap_8c.html#aa060ffb2b74faa0fbcce044d12466eb0">vera_heap_split_free_and_allocate</a></div><div class="ttdeci">vera_heap_index_t vera_heap_split_free_and_allocate(vera_heap_segment_index_t s, vera_heap_index_t free_index, vera_heap_size_packed_t required_size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:377</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab22877fcdd89930bac4febe0823ac8e4"><div class="ttname"><a href="cx16-veraheap_8c.html#ab22877fcdd89930bac4febe0823ac8e4">vera_heap_set_next</a></div><div class="ttdeci">void vera_heap_set_next(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_index_t next)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:150</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab379dab4ab1addfd1307454cd51ee12a"><div class="ttname"><a href="cx16-veraheap_8c.html#ab379dab4ab1addfd1307454cd51ee12a">vera_heap_is_free</a></div><div class="ttdeci">bool vera_heap_is_free(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:93</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab403fdf10251a0079e602dd3c2f24de8"><div class="ttname"><a href="cx16-veraheap_8c.html#ab403fdf10251a0079e602dd3c2f24de8">vera_heap_find_best_fit</a></div><div class="ttdeci">vera_heap_index_t vera_heap_find_best_fit(vera_heap_segment_index_t s, vera_heap_size_packed_t requested_size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:465</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab665e4639173239054df06fbcc6b4f7b"><div class="ttname"><a href="cx16-veraheap_8c.html#ab665e4639173239054df06fbcc6b4f7b">vera_heap_set_prev</a></div><div class="ttdeci">void vera_heap_set_prev(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_index_t prev)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:162</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab73bff0c6196e62fd84eda6513e0ca84"><div class="ttname"><a href="cx16-veraheap_8c.html#ab73bff0c6196e62fd84eda6513e0ca84">vera_heap_get_left</a></div><div class="ttdeci">vera_heap_index_t vera_heap_get_left(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:168</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ab7e1256ff023c015dffcd48f0118a593"><div class="ttname"><a href="cx16-veraheap_8c.html#ab7e1256ff023c015dffcd48f0118a593">vera_heap_clear_free</a></div><div class="ttdeci">void vera_heap_clear_free(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:87</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ac2c9255c3eab12662c04bc9edc453bdc"><div class="ttname"><a href="cx16-veraheap_8c.html#ac2c9255c3eab12662c04bc9edc453bdc">vera_heap_free_insert</a></div><div class="ttdeci">vera_heap_index_t vera_heap_free_insert(vera_heap_segment_index_t s, vera_heap_index_t free_index, vera_heap_data_packed_t data, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:270</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ad69c8a84524912f71f3ffef1b8c96884"><div class="ttname"><a href="cx16-veraheap_8c.html#ad69c8a84524912f71f3ffef1b8c96884">heap_can_coalesce_right</a></div><div class="ttdeci">vera_heap_index_t heap_can_coalesce_right(vera_heap_segment_index_t s, vera_heap_index_t heap_index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:538</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_ae1703685eafebf925977ea30ca051148"><div class="ttname"><a href="cx16-veraheap_8c.html#ae1703685eafebf925977ea30ca051148">veraheap_dx</a></div><div class="ttdeci">__mem unsigned char veraheap_dx</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:29</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_aef4d56d199598446914c122fea6fc5a5"><div class="ttname"><a href="cx16-veraheap_8c.html#aef4d56d199598446914c122fea6fc5a5">vera_heap_get_size</a></div><div class="ttdeci">vera_heap_size_t vera_heap_get_size(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:121</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_af1ff4eb41167cd4684c74e14dfdfca1c"><div class="ttname"><a href="cx16-veraheap_8c.html#af1ff4eb41167cd4684c74e14dfdfca1c">vera_heap_alloc_size_get</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_alloc_size_get(vera_heap_size_t size)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:303</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_af678bf56278342ac9ce12c3f603439eb"><div class="ttname"><a href="cx16-veraheap_8c.html#af678bf56278342ac9ce12c3f603439eb">vera_heap_coalesce</a></div><div class="ttdeci">vera_heap_index_t vera_heap_coalesce(vera_heap_segment_index_t s, vera_heap_index_t left_index, vera_heap_index_t right_index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:567</div></div>
<div class="ttc" id="acx16-veraheap_8c_html_afa770d17148a400d11c57970557b64e4"><div class="ttname"><a href="cx16-veraheap_8c.html#afa770d17148a400d11c57970557b64e4">vera_heap_set_data_packed</a></div><div class="ttdeci">void vera_heap_set_data_packed(vera_heap_segment_index_t s, vera_heap_index_t index, vera_heap_data_packed_t data_packed)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:75</div></div>
<div class="ttc" id="acx16-veraheap_8h_html"><div class="ttname"><a href="cx16-veraheap_8h.html">cx16-veraheap.h</a></div></div>
<div class="ttc" id="acx16-veraheap_8h_html_a728d1f9c56e78e52f2485c6bcb4781fb"><div class="ttname"><a href="cx16-veraheap_8h.html#a728d1f9c56e78e52f2485c6bcb4781fb">vera_heap_dump_graphic_print</a></div><div class="ttdeci">void vera_heap_dump_graphic_print(vera_heap_segment_index_t s, unsigned char veraheap_dx, unsigned char veraheap_dy)</div><div class="ttdoc">Print the heap graphically in a block of 64 characters wide and 32 characters high....</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:812</div></div>
<div class="ttc" id="acx16-veraheap_8h_html_a966077fe1e9b76be7072e38bb70be0d6"><div class="ttname"><a href="cx16-veraheap_8h.html#a966077fe1e9b76be7072e38bb70be0d6">vera_heap_has_free</a></div><div class="ttdeci">bool vera_heap_has_free(vera_heap_segment_index_t s, vera_heap_size_int_t size_requested)</div><div class="ttdoc">Return if there is free memory according to the requested size.</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:972</div></div>
<div class="ttc" id="acx16-veraheap_8h_html_ab9a0e749baac7845889cc04aa05f13ff"><div class="ttname"><a href="cx16-veraheap_8h.html#ab9a0e749baac7845889cc04aa05f13ff">vera_heap_get_size_int</a></div><div class="ttdeci">vera_heap_size_int_t vera_heap_get_size_int(vera_heap_segment_index_t s, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:113</div></div>
<div class="ttc" id="acx16-veraheap__test__zeropage_8c_html_ab60c984999c1ee6b14a84d568194342a"><div class="ttname"><a href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a></div><div class="ttdeci">vera_heap_segment_index_t s</div><div class="ttdef"><b>Definition:</b> cx16-veraheap_test_zeropage.c:5</div></div>
<div class="ttc" id="acx16-veralib_8h_html"><div class="ttname"><a href="cx16-veralib_8h.html">cx16-veralib.h</a></div><div class="ttdoc">Commander X16 vera library for the kickc compiler. Commander X16 VERA (Versatile Embedded Retro Adapt...</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html">HEAP_INDEX</a></div><div class="ttdef"><b>Definition:</b> cx16-heap.h:84</div></div>
<div class="ttc" id="astructvera__heap__map__t_html"><div class="ttname"><a href="structvera__heap__map__t.html">vera_heap_map_t</a></div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:44</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a039ff5523db558367d819012fa240887"><div class="ttname"><a href="structvera__heap__map__t.html#a039ff5523db558367d819012fa240887">vera_heap_map_t::next</a></div><div class="ttdeci">vera_heap_index_t next[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:47</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a1dd9e3c18b90aba034fc1c2ea71d4936"><div class="ttname"><a href="structvera__heap__map__t.html#a1dd9e3c18b90aba034fc1c2ea71d4936">vera_heap_map_t::prev</a></div><div class="ttdeci">vera_heap_index_t prev[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:48</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a24ac5da89967e3f8034dec5d15cff825"><div class="ttname"><a href="structvera__heap__map__t.html#a24ac5da89967e3f8034dec5d15cff825">vera_heap_map_t::data0</a></div><div class="ttdeci">vera_heap_index_data_packed_t data0[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-typedefs.h:60</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a3a6cbfd6fecf118080c5528f69a113cd"><div class="ttname"><a href="structvera__heap__map__t.html#a3a6cbfd6fecf118080c5528f69a113cd">vera_heap_map_t::size1</a></div><div class="ttdeci">vera_heap_index_size_packed_t size1[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-typedefs.h:63</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a5c19602b7dfdda99fedffc371d79fca0"><div class="ttname"><a href="structvera__heap__map__t.html#a5c19602b7dfdda99fedffc371d79fca0">vera_heap_map_t::left</a></div><div class="ttdeci">vera_heap_index_t left[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:50</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a7679337b7d7f3746d718ddf6f5a16e1f"><div class="ttname"><a href="structvera__heap__map__t.html#a7679337b7d7f3746d718ddf6f5a16e1f">vera_heap_map_t::right</a></div><div class="ttdeci">vera_heap_index_t right[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:49</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_a8198cf0e93fa62c16a34c2c32e058b2a"><div class="ttname"><a href="structvera__heap__map__t.html#a8198cf0e93fa62c16a34c2c32e058b2a">vera_heap_map_t::size0</a></div><div class="ttdeci">vera_heap_index_size_packed_t size0[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-typedefs.h:62</div></div>
<div class="ttc" id="astructvera__heap__map__t_html_ab0b491921c5dd394f85c934ab69ef590"><div class="ttname"><a href="structvera__heap__map__t.html#ab0b491921c5dd394f85c934ab69ef590">vera_heap_map_t::data1</a></div><div class="ttdeci">vera_heap_index_data_packed_t data1[VERAHEAP_INDEXES]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-typedefs.h:61</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html"><div class="ttname"><a href="structvera__heap__segment__t.html">vera_heap_segment_t</a></div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:58</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a086632befdf1c1e91c5fdc2586188821"><div class="ttname"><a href="structvera__heap__segment__t.html#a086632befdf1c1e91c5fdc2586188821">vera_heap_segment_t::ceil</a></div><div class="ttdeci">vera_heap_data_packed_t ceil[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:67</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a11dbd856290dbd56b25992cc07b95126"><div class="ttname"><a href="structvera__heap__segment__t.html#a11dbd856290dbd56b25992cc07b95126">vera_heap_segment_t::vram_bank_ceil</a></div><div class="ttdeci">vram_bank_t vram_bank_ceil[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:65</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a1b15b50ea24d36b68295210575c383b7"><div class="ttname"><a href="structvera__heap__segment__t.html#a1b15b50ea24d36b68295210575c383b7">vera_heap_segment_t::heap_list</a></div><div class="ttdeci">vera_heap_index_t heap_list[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:71</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a1eab1340532b6d7f0f9e141b8a07b975"><div class="ttname"><a href="structvera__heap__segment__t.html#a1eab1340532b6d7f0f9e141b8a07b975">vera_heap_segment_t::heapSize</a></div><div class="ttdeci">unsigned int heapSize[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:80</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a1f5a5f996a87406df45b2402f1f4a88a"><div class="ttname"><a href="structvera__heap__segment__t.html#a1f5a5f996a87406df45b2402f1f4a88a">vera_heap_segment_t::freeCount</a></div><div class="ttdeci">unsigned int freeCount[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:78</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a2f8c0aeaa462e5e810897608c22821a8"><div class="ttname"><a href="structvera__heap__segment__t.html#a2f8c0aeaa462e5e810897608c22821a8">vera_heap_segment_t::free_list</a></div><div class="ttdeci">vera_heap_index_t free_list[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:72</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a347b1a1ab7682360bbcd63b2df6a91d9"><div class="ttname"><a href="structvera__heap__segment__t.html#a347b1a1ab7682360bbcd63b2df6a91d9">vera_heap_segment_t::vram_bank_floor</a></div><div class="ttdeci">vram_bank_t vram_bank_floor[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:61</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a398988dee8c7ed9a47609144a207fe6f"><div class="ttname"><a href="structvera__heap__segment__t.html#a398988dee8c7ed9a47609144a207fe6f">vera_heap_segment_t::idle_list</a></div><div class="ttdeci">vera_heap_index_t idle_list[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:73</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a3b0b3c064e6f9d7fdb01035459de0372"><div class="ttname"><a href="structvera__heap__segment__t.html#a3b0b3c064e6f9d7fdb01035459de0372">vera_heap_segment_t::floor</a></div><div class="ttdeci">vera_heap_data_packed_t floor[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:63</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a4bec9c9fe5dc91df06cfbf6f490e3b25"><div class="ttname"><a href="structvera__heap__segment__t.html#a4bec9c9fe5dc91df06cfbf6f490e3b25">vera_heap_segment_t::bram_bank</a></div><div class="ttdeci">bram_bank_t bram_bank</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:83</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a5df2e97134beebe9abcc8b6781ac7fce"><div class="ttname"><a href="structvera__heap__segment__t.html#a5df2e97134beebe9abcc8b6781ac7fce">vera_heap_segment_t::heap_offset</a></div><div class="ttdeci">vera_heap_data_packed_t heap_offset[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:75</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_a60031061b4807f15db7cfcc5ea2478d5"><div class="ttname"><a href="structvera__heap__segment__t.html#a60031061b4807f15db7cfcc5ea2478d5">vera_heap_segment_t::freeSize</a></div><div class="ttdeci">unsigned int freeSize[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:81</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_ab19986b63648d971bb24faa5ac79dcfa"><div class="ttname"><a href="structvera__heap__segment__t.html#ab19986b63648d971bb24faa5ac79dcfa">vera_heap_segment_t::index_position</a></div><div class="ttdeci">vera_heap_index_t index_position</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:84</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_ab250743d52eaa946657e9994036bfbdf"><div class="ttname"><a href="structvera__heap__segment__t.html#ab250743d52eaa946657e9994036bfbdf">vera_heap_segment_t::vram_offset_ceil</a></div><div class="ttdeci">vram_offset_t vram_offset_ceil[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:66</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_ac037a113af4cae4470deddac7f87f0ce"><div class="ttname"><a href="structvera__heap__segment__t.html#ac037a113af4cae4470deddac7f87f0ce">vera_heap_segment_t::vram_offset_floor</a></div><div class="ttdeci">vram_offset_t vram_offset_floor[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:62</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_acc9ace3b79869d7805199af24682f940"><div class="ttname"><a href="structvera__heap__segment__t.html#acc9ace3b79869d7805199af24682f940">vera_heap_segment_t::heapCount</a></div><div class="ttdeci">unsigned int heapCount[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:77</div></div>
<div class="ttc" id="astructvera__heap__segment__t_html_aea9e7b5ffce1d3bac1b7c6ebe47b6f0a"><div class="ttname"><a href="structvera__heap__segment__t.html#aea9e7b5ffce1d3bac1b7c6ebe47b6f0a">vera_heap_segment_t::idleCount</a></div><div class="ttdeci">unsigned int idleCount[VERAHEAP_SEGMENTS]</div><div class="ttdef"><b>Definition:</b> cx16-veraheap-TABLET-SVEN.h:79</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
