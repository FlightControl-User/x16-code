<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Equinoxe: C:/Users/svenv/OneDrive/Documents/GitHub/X16_Code/lib/cx16-heap.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Equinoxe
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">C:/Users/svenv/OneDrive/Documents/GitHub/X16_Code/lib/cx16-heap.c</div></div>
</div><!--header-->
<div class="contents">
<p >Create a heap segment in cx16 banked ram. For the given segment, a value between 0 and 15, define a heap in banked ram. The heapFloorBram defines a packed bram memory address, which must be declared using the function heap_bram_pack. The size of the heap must be given through heapSizeBram, but is in heap_size_packed format. Use the function heap_size_pack to declare the size, which can be larger than 0xFFFF.</p>
<p >Create a heap segment in cx16 banked ram. For the given segment, a value between 0 and 15, define a heap in banked ram. The heapFloorBram defines a packed bram memory address, which must be declared using the function heap_bram_pack. The size of the heap must be given through heapSizeBram, but is in heap_size_packed format. Use the function heap_size_pack to declare the size, which can be larger than 0xFFFF.</p>
<p >// Initialize the bram heap for dynamic allocation of the entities. heap_bram_packed bram_entities = heap_segment_bram( 0, heap_bram_pack(1, (heap_ptr)0xA000), heap_size_pack( 0x2000 * 20) );</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segment</td><td></td></tr>
    <tr><td class="paramname">heapFloorBram</td><td></td></tr>
    <tr><td class="paramname">heapSizeBram</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>heap_address</dd></dl>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cx16.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cx16-heap_8h.html">cx16-heap.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cx16-veralib_8h.html">cx16-veralib.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a id="_a0" name="_a0"></a><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a> <a id="a1" name="a1"></a><a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[16];</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a>  <a id="a2" name="a2"></a><a class="code hl_function" href="cx16-heap_8c.html#a9b6b3da4fb38bd95c2ef852824c07403">cx16_bram_pack</a>(cx16_bank bank, cx16_ptr ptr);</div>
<div class="line"><span class="keyword">inline</span> cx16_vram_packed  <a id="a3" name="a3"></a><a class="code hl_function" href="cx16-heap_8c.html#ac902874d357e29150c04011f014f3192">cx16_vram_pack</a>(cx16_bank bank, cx16_offset offset);</div>
<div class="line"><span class="keyword">inline</span> cx16_bank         <a id="a4" name="a4"></a><a class="code hl_function" href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a>(cx16_bram_packed bram_packed);</div>
<div class="line"><span class="keyword">inline</span> cx16_ptr          <a id="a5" name="a5"></a><a class="code hl_function" href="cx16-heap_8c.html#ae5a8885c1c7e8b3ac215274211401d33">cx16_bram_unpack_ptr</a>(cx16_bram_packed bram_packed);</div>
<div class="line"><span class="keyword">inline</span> cx16_bank         <a id="a6" name="a6"></a><a class="code hl_function" href="cx16-heap_8c.html#adafc2960cafd670f4d4d2a5693ef0fc3">cx16_vram_unpack_bank</a>(cx16_vram_packed vram_packed);</div>
<div class="line"><span class="keyword">inline</span> cx16_offset       <a id="a7" name="a7"></a><a class="code hl_function" href="cx16-heap_8c.html#ae7775332be17fc18c96e8f35a2410802">cx16_vram_unpack_offset</a>(cx16_vram_packed vram_packed);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> dword <a id="a8" name="a8"></a><a class="code hl_function" href="cx16-heap_8h.html#a6cdfac7a61ee36d9c31b9e7ec94e79a4">heap_segment_vram_floor_ulong</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a id="a9" name="a9"></a><a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> bank = <a class="code hl_function" href="cx16-heap_8c.html#adafc2960cafd670f4d4d2a5693ef0fc3">cx16_vram_unpack_bank</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>-&gt;HeapFloor);</div>
<div class="line">    dword ulong = ((dword)bank)*0x10000;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> offset = <a class="code hl_function" href="cx16-heap_8c.html#ae7775332be17fc18c96e8f35a2410802">cx16_vram_unpack_offset</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>-&gt;HeapFloor);</div>
<div class="line">    ulong = ulong + (word)offset;</div>
<div class="line">    <span class="keywordflow">return</span> ulong;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> <a id="a10" name="a10"></a><a class="code hl_function" href="cx16-heap_8h.html#a7997df5dc4b0113b58e80cbd6bd19d61">heap_bram_pack</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> bank, <a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a> ptr) {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#a9b6b3da4fb38bd95c2ef852824c07403">cx16_bram_pack</a>(bank, ptr);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> <a id="a11" name="a11"></a><a class="code hl_function" href="cx16-heap_8h.html#ad89210fa68357b828a07d684f309915b">heap_bram_unpack_bank</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> bram_packed) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a>)<a class="code hl_function" href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a>(bram_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a> <a id="a12" name="a12"></a><a class="code hl_function" href="cx16-heap_8h.html#add5189addf1dcf929ab4b9d72bdd802b">heap_bram_unpack_ptr</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> bram_packed) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a>)<a class="code hl_function" href="cx16-heap_8c.html#ae5a8885c1c7e8b3ac215274211401d33">cx16_bram_unpack_ptr</a>(bram_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a> <a id="a13" name="a13"></a><a class="code hl_function" href="cx16-heap_8h.html#adc1c62fc70ce21ffa54e455049044a02">heap_vram_pack</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> bank, <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a> offset) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a>)<a class="code hl_function" href="cx16-heap_8c.html#ac902874d357e29150c04011f014f3192">cx16_vram_pack</a>(bank, offset);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> <a id="a14" name="a14"></a><a class="code hl_function" href="cx16-heap_8h.html#a6044e9ccdc5e091b511e0cd920ff7fb9">heap_vram_unpack_bank</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a> vram_packed) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a>)<a class="code hl_function" href="cx16-heap_8c.html#adafc2960cafd670f4d4d2a5693ef0fc3">cx16_vram_unpack_bank</a>(vram_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a>  <a id="a15" name="a15"></a><a class="code hl_function" href="cx16-heap_8h.html#acd2aa89ed34699981fcbec36423a72cd">heap_vram_unpack_offset</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a> vram_packed) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a>)<a class="code hl_function" href="cx16-heap_8c.html#ae7775332be17fc18c96e8f35a2410802">cx16_vram_unpack_offset</a>(vram_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a16" name="a16"></a><a class="code hl_function" href="cx16-heap_8c.html#a583320493b13deff76b3a1f523432317">heap_size_pack</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a> size) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a>)cx16_size_pack(size);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1b21d5a7e288413fa7351f5bdbd25ffe">fb_heap_size_t</a> <a id="a17" name="a17"></a><a class="code hl_function" href="cx16-heap_8c.html#a6b858f8d297f636f4148eaae4b4d2f34">heap_size_unpack</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size_packed) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1b21d5a7e288413fa7351f5bdbd25ffe">fb_heap_size_t</a>)cx16_size_unpack(size_packed);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a id="_a18" name="_a18"></a><a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index_ptr</a> <a id="a19" name="a19"></a><a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">byte</span> bank = <a class="code hl_function" href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a>(handle);</div>
<div class="line">    cx16_bram_bank_set(bank);</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index_ptr</a>)<a class="code hl_function" href="cx16-heap_8c.html#ae5a8885c1c7e8b3ac215274211401d33">cx16_bram_unpack_ptr</a>(handle);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a20" name="a20"></a><a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// printf(&quot;handle = %x\n&quot;, handle);</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(heapIndex)-&gt;<a id="a21" name="a21"></a><a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#af0af75de8eff3270f0a8e9132aac7224">data</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a22" name="a22"></a><a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(heapIndex)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#af0af75de8eff3270f0a8e9132aac7224">data</a> = data;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a23" name="a23"></a><a class="code hl_function" href="cx16-heap_8h.html#a1591673749155051c96f58bad3e87b87">heap_data_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex) {</div>
<div class="line"> </div>
<div class="line">    cx16_bank old_bank = cx16_bram_bank_get();</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data_handle = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(heapIndex);</div>
<div class="line">    cx16_bram_bank_set(old_bank);</div>
<div class="line">    <span class="keywordflow">return</span> data_handle;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> <a id="a24" name="a24"></a><a class="code hl_function" href="cx16-heap_8h.html#a0946a4292d339db7ad134087a4c02cde">heap_data_bank</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line"> </div>
<div class="line">    cx16_bank old_bank = cx16_bram_bank_get();</div>
<div class="line">    <span class="comment">// printf(&quot;handle = %x\n&quot;, handle);</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data_handle = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(handle);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7b97ae4206ec8f0fdeb4e1dd9aa304b1">heap_index_info</a> header_info = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle)-&gt;<a id="a25" name="a25"></a><a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a>;</div>
<div class="line">    header_info &amp;= <a id="a26" name="a26"></a><a class="code hl_variable" href="cx16-heap_8h.html#a391536b75bdeb026f29ec60d3e59e3f1">heap_type_mask</a>;</div>
<div class="line">    cx16_bram_bank_set(old_bank);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Data blocks in bram or in vram are handled differently.</span></div>
<div class="line">    <span class="comment">// We only need to bank if the data is in bram, otherwise the programmer will handle it.</span></div>
<div class="line">    <span class="comment">//printf(&quot;heap_data_bank: header info = %x\n&quot;, header_info);</span></div>
<div class="line">    <span class="keywordflow">if</span>(header_info == <a id="a27" name="a27"></a><a class="code hl_variable" href="cx16-heap_8h.html#ac5f4d22119a6f60f95df03173ef94e5c">heap_type_bram</a>) {</div>
<div class="line">        <span class="comment">// return the bank of the data handle, which is expressed in bram format.</span></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a>(data_handle);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// return the bank of the data handle, which is expressed in vram format.</span></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#adafc2960cafd670f4d4d2a5693ef0fc3">cx16_vram_unpack_bank</a>(data_handle);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a> <a id="a28" name="a28"></a><a class="code hl_function" href="cx16-heap_8h.html#acbcfab14fcf5ab528c7c2b122d01e90f">heap_data_ptr</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data_handle = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(handle);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7b97ae4206ec8f0fdeb4e1dd9aa304b1">heap_index_info</a> header_info = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a>;</div>
<div class="line">    header_info &amp;= <a class="code hl_variable" href="cx16-heap_8h.html#a391536b75bdeb026f29ec60d3e59e3f1">heap_type_mask</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Data blocks in bram or in vram are handled differently.</span></div>
<div class="line">    <span class="comment">// We only need to bank if the data is in bram, otherwise the programmer will handle it.</span></div>
<div class="line">    <span class="keywordflow">if</span>(header_info == <a class="code hl_variable" href="cx16-heap_8h.html#ac5f4d22119a6f60f95df03173ef94e5c">heap_type_bram</a>) {</div>
<div class="line">        <span class="comment">// cx16_bram_bank_set((fb_heap_bank_t)(&gt;data_handle) &gt;&gt; 2);</span></div>
<div class="line">        <span class="keywordtype">byte</span> bank = <a class="code hl_function" href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a>(data_handle);</div>
<div class="line">        cx16_bram_bank_set(bank);</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a>)<a class="code hl_function" href="cx16-heap_8c.html#ae5a8885c1c7e8b3ac215274211401d33">cx16_bram_unpack_ptr</a>(data_handle);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a>)<a class="code hl_function" href="cx16-heap_8c.html#ae7775332be17fc18c96e8f35a2410802">cx16_vram_unpack_offset</a>(data_handle);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a29" name="a29"></a><a class="code hl_function" href="cx16-heap_8c.html#a7f875e4bf0bb65e4c3924e69df9fc156">heap_next_set</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> next) {</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index_ptr</a> header_ptr = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle);</div>
<div class="line">        header_ptr-&gt;<a id="a30" name="a30"></a><a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = next;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a31" name="a31"></a><a class="code hl_function" href="cx16-heap_8c.html#aa37fd55a77663ef2e754c8a3da5d9929">heap_prev_set</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> prev) {</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index_ptr</a> header_ptr = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle);</div>
<div class="line">        header_ptr-&gt;<a id="a32" name="a32"></a><a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = prev;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a33" name="a33"></a><a class="code hl_function" href="cx16-heap_8c.html#a3d91c9d0b86435c944c8f8894347baab">heap_next_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a34" name="a34"></a><a class="code hl_function" href="cx16-heap_8c.html#a108888791eb16584b78d5d8c6880dbd9">heap_prev_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(handle)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> <a id="a35" name="a35"></a><a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line">    <a class="code hl_struct" href="struct_h_e_a_p___i_n_d_e_x.html">heap_index_ptr</a> index_ptr = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(heapIndex);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7b97ae4206ec8f0fdeb4e1dd9aa304b1">heap_index_info</a> header_info = index_ptr-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a>;</div>
<div class="line">    header_info &amp;= ~heap_size_mask;</div>
<div class="line">    size |= header_info;</div>
<div class="line">    index_ptr-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a> = size;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a36" name="a36"></a><a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a>)(<a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(heapIndex)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a>) &amp; <a id="a37" name="a37"></a><a class="code hl_variable" href="cx16-heap_8h.html#a28995fc62d36266fb058c2d36cdd785e">heap_size_mask</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a38" name="a38"></a><a class="code hl_function" href="cx16-heap_8h.html#af17a694d1e1e3be270c48eac45507ccf">heap_size_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex) {</div>
<div class="line">    <span class="keywordtype">char</span> oldbank = cx16_bram_bank_get();</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(heapIndex) &lt;&lt; 3;</div>
<div class="line">    cx16_bram_bank_set(oldbank);</div>
<div class="line">    <span class="keywordflow">return</span> size;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a39" name="a39"></a><a class="code hl_function" href="cx16-heap_8c.html#aa4418ea7cc28d14549aa5035e2ba2e18">vera_heap_index_find</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> list, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> anchor = list;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> end = list;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// O(n) search.</span></div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(anchor); </div>
<div class="line">        <span class="keywordflow">if</span> (index != data) {</div>
<div class="line">            anchor = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(anchor)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Found the occurrance:</span></div>
<div class="line">        <span class="keywordflow">return</span> anchor;</div>
<div class="line">    } <span class="keywordflow">while</span> (anchor != end);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a40" name="a40"></a><a class="code hl_function" href="cx16-heap_8c.html#ace30bce89c39bb165fcdcd628d5462c1">heap_list_insert_at</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> *list, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> at) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Missing ASM fragment Fragment not found _deref_pwuz1_neq_vwuc1_then_la1. Attempted variations _deref_pwuz1_neq_vwuc1_then_la1 _deref_pwuz1_neq_vduc1_then_la1 _deref_pwuz1_neq_vdsc1_then_la1</span></div>
<div class="line">    <span class="comment">// if (*list == 0xffff) {</span></div>
<div class="line">    <span class="keywordflow">if</span> (!(*list)) {</div>
<div class="line">        <span class="comment">// empty list</span></div>
<div class="line">        *list = index;</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = index;</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> prev = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(at)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> curr = at;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add index to list at last position.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = prev;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(prev)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = index;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = curr;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(curr)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = index;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> dataList = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(*list);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> dataIndex = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index);</div>
<div class="line">    <span class="keywordflow">if</span>(dataIndex&gt;dataList) {</div>
<div class="line">        *list = index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a41" name="a41"></a><a class="code hl_function" href="cx16-heap-bram-fb_8h.html#a8f801956d23b67723b1b266e6bbc8ab7">heap_list_insert</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> *list, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Missing ASM fragment Fragment not found _deref_pwuz1_neq_vwuc1_then_la1. Attempted variations _deref_pwuz1_neq_vwuc1_then_la1 _deref_pwuz1_neq_vduc1_then_la1 _deref_pwuz1_neq_vdsc1_then_la1</span></div>
<div class="line">    <span class="comment">// if (*list == 0xffff) {</span></div>
<div class="line">    <span class="keywordflow">if</span> (!(*list)) {</div>
<div class="line">        <span class="comment">// empty list</span></div>
<div class="line">        *list = index;</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = *list;</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = *list;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> last = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> first = *list;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add index to list at last position.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = last;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(last)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = index;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = first;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(first)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = index;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> dataList = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(*list);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> dataIndex = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index);</div>
<div class="line">    <span class="keywordflow">if</span>(dataIndex&gt;dataList) {</div>
<div class="line">        *list = index;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a42" name="a42"></a><a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> *list, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!*list) {</div>
<div class="line">        <span class="comment">// empty list</span></div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The free makes the list empty!</span></div>
<div class="line">    <span class="keywordflow">if</span> (*list == <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>) {</div>
<div class="line">        *list = 0; <span class="comment">// We initialize the start of the list to null.</span></div>
<div class="line">        <span class="keywordflow">return</span> 0; </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The free changes the first header of the list!</span></div>
<div class="line">    <span class="keywordflow">if</span> (index == *list) { </div>
<div class="line">        *list = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(*list)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(<a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;prev)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a> = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(<a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;next)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a> = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a43" name="a43"></a><a class="code hl_function" href="cx16-heap_8c.html#adfc0e7d37b3d24656c5751a7b3730642">heap_heap_insert</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a id="a44" name="a44"></a><a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line">    <a class="code hl_function" href="cx16-heap-bram-fb_8h.html#a8f801956d23b67723b1b266e6bbc8ab7">heap_list_insert</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList, heapIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(heapIndex, size &amp; <a class="code hl_variable" href="cx16-heap_8h.html#a28995fc62d36266fb058c2d36cdd785e">heap_size_mask</a>);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapCount++;</div>
<div class="line">    <span class="keywordflow">return</span> heapIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a45" name="a45"></a><a class="code hl_function" href="cx16-heap_8c.html#a883c92155edcb20208f9e29f5dd0e82d">heap_heap_insert_at</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> at, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ace30bce89c39bb165fcdcd628d5462c1">heap_list_insert_at</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList, heapIndex, at);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(heapIndex, size &amp; <a class="code hl_variable" href="cx16-heap_8h.html#a28995fc62d36266fb058c2d36cdd785e">heap_size_mask</a>);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapCount++;</div>
<div class="line">    <span class="keywordflow">return</span> heapIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a46" name="a46"></a><a class="code hl_function" href="cx16-heap_8c.html#ab81a49aa9af85530c2eeff677d078d11">heap_heap_remove</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapCount--;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList, heapIndex);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a47" name="a47"></a><a class="code hl_function" href="cx16-heap_8c.html#ac1836fbdad070347161953c8e7696b3d">heap_free_insert</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line">    <a class="code hl_function" href="cx16-heap-bram-fb_8h.html#a8f801956d23b67723b1b266e6bbc8ab7">heap_list_insert</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList, freeIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(freeIndex, data);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(freeIndex, size);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeCount++;</div>
<div class="line">    <span class="keywordflow">return</span> freeIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a48" name="a48"></a><a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeCount--;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList, freeIndex);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a49" name="a49"></a><a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> Index) {</div>
<div class="line">    <a class="code hl_function" href="cx16-heap-bram-fb_8h.html#a8f801956d23b67723b1b266e6bbc8ab7">heap_list_insert</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList, Index);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(Index, 0);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(Index, 0);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleCount++;</div>
<div class="line">    <span class="keywordflow">return</span> Index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a50" name="a50"></a><a class="code hl_function" href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> Index) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleCount--;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a>(&amp;<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList, Index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a51" name="a51"></a><a class="code hl_function" href="cx16-heap_8c.html#af984bf6b0bedb6ecdb6220bee7dad544">heap_alloc_size_get</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a1b21d5a7e288413fa7351f5bdbd25ffe">fb_heap_size_t</a> size) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a>)((size - 1) &gt;&gt; 3) + 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a52" name="a52"></a><a class="code hl_function" href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO: Search idle list.</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(index) {</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The current header gets the current heap position handle.</span></div>
<div class="line">        index = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// We adjust to the next header position.</span></div>
<div class="line">        <span class="comment">// Missing ASM fragment Fragment not found _deref_pwuc1=_deref_pwuc1_plus_1. Attempted variations _deref_pwuc1=_deref_pwuc1_plus_1</span></div>
<div class="line">        <span class="comment">// s-&gt;HeaderPosition += 1; // add 8 aligned bytes</span></div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a53" name="a53"></a><a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab4ae2afa49139b05457624cf4727757f">HeaderPosition</a> = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition;</div>
<div class="line">        <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab4ae2afa49139b05457624cf4727757f">HeaderPosition</a> += 1; </div>
<div class="line">        <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition = <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab4ae2afa49139b05457624cf4727757f">HeaderPosition</a>; <span class="comment">// add 8 aligned bytes </span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// TODO: out of memory check.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a54" name="a54"></a><a class="code hl_function" href="cx16-heap_8c.html#a61be93ce8957e936f1c58f905fcb8144">heap_header_add</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add a new index.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index = <a class="code hl_function" href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Decrease the current heap position handle with the size needed to be newly allocated.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heap_position = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition;</div>
<div class="line">    heap_position -= size;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition = heap_position;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The data handle of the header gets appointed with the current heap position handle.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(index, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#adfc0e7d37b3d24656c5751a7b3730642">heap_heap_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, index, size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// We fill out the header info with the type of heap, and the size information of the heap data.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7b97ae4206ec8f0fdeb4e1dd9aa304b1">heap_index_info</a> header_info = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapType; <span class="comment">// We add the heaptype to validate at each header block move the type of heap we are dealing with.</span></div>
<div class="line">    header_info |= size;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">size</a> = header_info;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a55" name="a55"></a><a class="code hl_function" href="cx16-heap_8c.html#ae9378a99d0a49522a6715be5900c9f93">vera_heap_header_split</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeHeap, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex = <a class="code hl_function" href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex = <a class="code hl_function" href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// printf(&quot;Split: freeHeap = %x\n&quot;, freeHeap);</span></div>
<div class="line">    <span class="comment">// Add the freeBlock to the freeList</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> dataIndex = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeHeap);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeHeap = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(freeHeap);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(heapIndex, dataIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a883c92155edcb20208f9e29f5dd0e82d">heap_heap_insert_at</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, heapIndex, <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(freeHeap)-&gt;next, size);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(freeHeap, dataIndex + size);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeFree = sizeHeap - size;</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac1836fbdad070347161953c8e7696b3d">heap_free_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex, freeHeap, sizeFree);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(freeHeap, sizeFree);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> heapIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a56" name="a56"></a><a class="code hl_function" href="cx16-heap_8c.html#a816ba17a988728f4dd77f2866a48fbf1">vera_heap_can_split_free</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeHeap, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeRequired) {</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeFree = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(freeHeap);</div>
<div class="line">    <span class="keywordflow">return</span> sizeFree - sizeRequired;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a57" name="a57"></a><a class="code hl_function" href="cx16-heap_8c.html#a88b916ba335e97c1f676d65e8ef87198">heap_header_list_allocate</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeHeap, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeRequired) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Split the larger header, reusing the free part.</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="cx16-heap_8c.html#a816ba17a988728f4dd77f2866a48fbf1">vera_heap_can_split_free</a>(freeHeap, sizeRequired)) {</div>
<div class="line">        freeHeap = <a class="code hl_function" href="cx16-heap_8c.html#ae9378a99d0a49522a6715be5900c9f93">vera_heap_header_split</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeHeap, sizeRequired);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(freeHeap, sizeRequired);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> freeHeap;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a58" name="a58"></a><a class="code hl_function" href="cx16-heap_8c.html#a3793be05f897d511214a01af772a3f26">heap_header_find_free</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeRequired) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList) {</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> end = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// O(n) search.</span></div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a59" name="a59"></a><a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a> = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(freeIndex);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a> &lt; sizeRequired) {</div>
<div class="line">            freeIndex = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(freeIndex)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Found the header:</span></div>
<div class="line">        <span class="comment">// printf(&quot;Found FreeIndex = %x, size = %x, block_size = %x\n&quot;, freeIndex, size, block_size);</span></div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeHeap = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeIndex);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Clean Free Index</span></div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line">        <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line">    </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#a88b916ba335e97c1f676d65e8ef87198">heap_header_list_allocate</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeHeap, sizeRequired);</div>
<div class="line">    } <span class="keywordflow">while</span> (freeIndex != end);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a60" name="a60"></a><a class="code hl_function" href="cx16-heap_8c.html#a89612d095562858164c8b6b39211094e">heap_coalesce_low</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeHeap = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeIndex);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizeFree = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(freeHeap);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeHeap);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> lowdata = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index);</div>
<div class="line">    <span class="comment">// Detach freeBlock from freeList and add to idleList.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ab81a49aa9af85530c2eeff677d078d11">heap_heap_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeHeap);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeHeap);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(index, <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(index) + sizeFree);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a>(index, data);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// printf(&quot;coalesce low: lowdata = %x, data = %x, freeIndex = %x, index = %x\n&quot;, lowdata, data, freeIndex, index);</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> freeHeap;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a61" name="a61"></a><a class="code hl_function" href="cx16-heap_8c.html#a4309819103e63a675362df40166c61ad">heap_coalesce_high</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeData = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeIndex);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> sizeFree = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(freeData);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(freeData);</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> lowdata = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detach freeBlock from freeList and add to unusedList.</span></div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ab81a49aa9af85530c2eeff677d078d11">heap_heap_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeData);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeData);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a>(index, <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(index) + sizeFree);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// printf(&quot;coalesce high: lowdata = %x, data = %x, freeIndex = %x, index = %x\n&quot;, lowdata, data, freeIndex, index);</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a62" name="a62"></a><a class="code hl_function" href="cx16-heap_8c.html#a3f088d483ab9b6078b74f5b4cc9a11d8">heap_can_coalesce_low</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> next = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> free = <a class="code hl_function" href="cx16-heap_8c.html#aa4418ea7cc28d14549aa5035e2ba2e18">vera_heap_index_find</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList, next);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(free) {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(next);</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> size = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(next);</div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index) == data+size) {</div>
<div class="line">            <span class="keywordflow">return</span> free;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a63" name="a63"></a><a class="code hl_function" href="cx16-heap_8c.html#af676409759ce94ac0744c73d481ceee0">heap_can_coalesce_high</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index) {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> prev = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">prev</a>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> free = <a class="code hl_function" href="cx16-heap_8c.html#aa4418ea7cc28d14549aa5035e2ba2e18">vera_heap_index_find</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList, prev);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(free) {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> data = <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(index);</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> size = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(index);</div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(prev) == data+size) {</div>
<div class="line">            <span class="keywordflow">return</span> free;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a64" name="a64"></a><a class="code hl_function" href="cx16-heap_8c.html#ada4896b02c851f3a923c200bbe508260">heap_header_find</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size) {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_function" href="cx16-heap_8c.html#a3793be05f897d511214a01af772a3f26">heap_header_find_free</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, size);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Initialize the segment.</span></div>
<div class="line"><span class="keywordtype">void</span> <a id="a65" name="a65"></a><a class="code hl_function" href="cx16-heap_8c.html#a2f401ee9e8a8a1b40919cd92ea2117d9">heap_segment_init</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>) {</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapCount = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapSize = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeCount = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeSize = 0;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleCount = 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#adf788b6b721333705c60aa63657c6bbe">heap_address</a> <a id="a66" name="a66"></a><a class="code hl_function" href="cx16-heap_8h.html#a31ba0839f110bfacb0cc194e1c3cddf9">heap_segment_bram</a>(</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>, </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> heapFloorBram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> heapSizeBram</div>
<div class="line">    ) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapType = <a class="code hl_variable" href="cx16-heap_8h.html#ac5f4d22119a6f60f95df03173ef94e5c">heap_type_bram</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapFloor = heapFloorBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil = heapFloorBram+heapSizeBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderFloor = heapFloorBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderCeil = heapFloorBram+heapSizeBram; </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapSize = heapSizeBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderSize = heapSizeBram;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapFloor;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a2f401ee9e8a8a1b40919cd92ea2117d9">heap_segment_init</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#adf788b6b721333705c60aa63657c6bbe">heap_address</a> <a id="a67" name="a67"></a><a class="code hl_function" href="cx16-heap_8h.html#a2983e45d51f938bc96bedce171758daf">heap_segment_vram_ceil</a>(</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>, </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a> heapCeilVram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> heapSizeVram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> indexFloorBram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> indexSizeBram</div>
<div class="line">    ) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapType = <a id="a68" name="a68"></a><a class="code hl_variable" href="cx16-heap_8h.html#ac91e06c654ba100c2c52d45617d5b41d">heap_type_vram</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapFloor = heapCeilVram-heapSizeVram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil = heapCeilVram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderFloor = indexFloorBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderCeil = indexFloorBram+indexSizeBram; </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderFloor; <span class="comment">// CX16 BANKED RAM HANDLE</span></div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil; <span class="comment">// VERA VRAM HANDLE</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a2f401ee9e8a8a1b40919cd92ea2117d9">heap_segment_init</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapFloor;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#adf788b6b721333705c60aa63657c6bbe">heap_address</a> <a id="a69" name="a69"></a><a class="code hl_function" href="cx16-heap_8h.html#a57da669324607a311f40623c223bb39b">heap_segment_vram_floor</a>(</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>, </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a> heapFloorVram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> heapSizeVram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a> indexFloorBram,</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> indexSizeBram</div>
<div class="line">    ) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapType = <a class="code hl_variable" href="cx16-heap_8h.html#ac91e06c654ba100c2c52d45617d5b41d">heap_type_vram</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapFloor = heapFloorVram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil = heapFloorVram+heapSizeVram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderFloor = indexFloorBram;</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderCeil = indexFloorBram+indexSizeBram; </div>
<div class="line"> </div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeaderFloor; <span class="comment">// CX16 BANKED RAM HANDLE</span></div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapPosition = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil; <span class="comment">// VERA VRAM HANDLE</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#a2f401ee9e8a8a1b40919cd92ea2117d9">heap_segment_init</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;HeapCeil;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a70" name="a70"></a><a class="code hl_function" href="cx16-heap-bram-fb_8h.html#a6b123f12359664b65ddbd9615b9a6e01">heap_alloc</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a1b21d5a7e288413fa7351f5bdbd25ffe">fb_heap_size_t</a> size) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> bank_old = cx16_bram_bank_get();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Adjust given size to 8 bytes boundary (shift right with 3 bits).</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> sizePacked = <a class="code hl_function" href="cx16-heap_8c.html#af984bf6b0bedb6ecdb6220bee7dad544">heap_alloc_size_get</a>(size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Traverse the blocks list, searching for a header of</span></div>
<div class="line">    <span class="comment">// the appropriate size.</span></div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> index = <a class="code hl_function" href="cx16-heap_8c.html#ada4896b02c851f3a923c200bbe508260">heap_header_find</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, sizePacked);</div>
<div class="line">        <span class="keywordflow">if</span> (index) {</div>
<div class="line">            <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeSize -= sizePacked;</div>
<div class="line">            <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a>)index;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// No free heap found, request to map more memory.</span></div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> heapIndex = <a class="code hl_function" href="cx16-heap_8c.html#a61be93ce8957e936f1c58f905fcb8144">heap_header_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, sizePacked);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapSize += sizePacked;</div>
<div class="line"> </div>
<div class="line">    cx16_bram_bank_set(bank_old);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a>)heapIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a71" name="a71"></a><a class="code hl_function" href="cx16-heap-bram-fb_8h.html#ae8858350e85fd9f71aa054361d447037">heap_free</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> handle) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a> bank_old = cx16_bram_bank_get();</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a> = <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(handle);</div>
<div class="line">    <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeSize += <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a>;</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex = <a class="code hl_function" href="cx16-heap_8c.html#a3f088d483ab9b6078b74f5b4cc9a11d8">heap_can_coalesce_low</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, handle);</div>
<div class="line">        <span class="comment">// printf(&quot;Can coalesce %x low %x\n&quot;, freeIndex, index);</span></div>
<div class="line">        <span class="keywordflow">if</span> (freeIndex) {</div>
<div class="line">            <a class="code hl_function" href="cx16-heap_8c.html#a89612d095562858164c8b6b39211094e">heap_coalesce_low</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex, handle);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex = <a class="code hl_function" href="cx16-heap_8c.html#af676409759ce94ac0744c73d481ceee0">heap_can_coalesce_high</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, handle);</div>
<div class="line">        <span class="keywordflow">if</span> (freeIndex) {</div>
<div class="line">            <a class="code hl_function" href="cx16-heap_8c.html#a4309819103e63a675362df40166c61ad">heap_coalesce_high</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, handle, freeIndex);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> freeIndex = <a class="code hl_function" href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ac1836fbdad070347161953c8e7696b3d">heap_free_insert</a>(<a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>, freeIndex, handle, <a class="code hl_function" href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a>(handle));</div>
<div class="line"> </div>
<div class="line">    *(<span class="keywordtype">char</span>*)<a class="code hl_function" href="cx16-heap_8h.html#acbcfab14fcf5ab528c7c2b122d01e90f">heap_data_ptr</a>(<a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(handle)) = 0;</div>
<div class="line"> </div>
<div class="line">    cx16_bram_bank_set(bank_old);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> freeIndex;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a72" name="a72"></a><a class="code hl_function" href="cx16-heap_8c.html#ad3a72919ae742a6e876f9eeb36e95c80">heap_print_bram</a>(<span class="keywordtype">char</span> prefix, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> list) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!list) <span class="keywordflow">return</span>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> <a id="a73" name="a73"></a><a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a> = list;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> end = list;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a> ptr = <a class="code hl_function" href="cx16-heap_8h.html#acbcfab14fcf5ab528c7c2b122d01e90f">heap_data_ptr</a>(<a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a>);</div>
<div class="line">        <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> size = <a class="code hl_function" href="cx16-heap_8h.html#af17a694d1e1e3be270c48eac45507ccf">heap_size_get</a>(<a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a>);</div>
<div class="line">        size = size / 8;</div>
<div class="line">        word wptr = (word)ptr;</div>
<div class="line">        wptr = wptr - 0xA000;</div>
<div class="line">        wptr = wptr / 8;</div>
<div class="line">        <span class="keywordflow">for</span>(<a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> p = 0; p&lt;size; p++) {</div>
<div class="line">            <span class="keywordtype">byte</span> y = (byte)((wptr+p) / 64);</div>
<div class="line">            <span class="keywordtype">byte</span> x = (byte)((wptr+p) % 64);</div>
<div class="line">            gotoxy(63-x,15-y);</div>
<div class="line">            printf(<span class="stringliteral">&quot;%c&quot;</span>, prefix);</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a> = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(<a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a>)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">    } <span class="keywordflow">while</span> (<a class="code hl_variable" href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a> != end);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a74" name="a74"></a><a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<span class="keywordtype">char</span> prefix, <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> list) {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!list) <span class="keywordflow">return</span>;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> anchor_index = list;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a> end_index = list;</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;%c:&quot;</span>, prefix);</div>
<div class="line">        printf(<span class="stringliteral">&quot;%05x[%05x,%06u&quot;</span>, anchor_index, <a class="code hl_function" href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a>(anchor_index), <a class="code hl_function" href="cx16-heap_8h.html#af17a694d1e1e3be270c48eac45507ccf">heap_size_get</a>(anchor_index) );</div>
<div class="line">        printf(<span class="stringliteral">&quot;,%05x,%05x&quot;</span>, <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(anchor_index)-&gt;next, <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(anchor_index)-&gt;prev );</div>
<div class="line">        printf(<span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line">        anchor_index = <a class="code hl_function" href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a>(anchor_index)-&gt;<a class="code hl_variable" href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">next</a>;</div>
<div class="line">    } <span class="keywordflow">while</span> (anchor_index != end_index);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a75" name="a75"></a><a class="code hl_function" href="cx16-heap_8h.html#a71a910219ddd5101f462040d248f0acc">heap_dump_stats</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;size  alloc:%7u free:%7u\n&quot;</span>, <a id="a76" name="a76"></a><a class="code hl_function" href="cx16-heap_8h.html#a9942ffaaeffde89b04ec43cd8e2133a1">heap_alloc_size</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>), <a id="a77" name="a77"></a><a class="code hl_function" href="cx16-heap_8h.html#a19bd02c1e8449979b730bb5dfa9f5d21">heap_free_size</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>));</div>
<div class="line">    printf(<span class="stringliteral">&quot;count alloc:%4u free:%4u idle:%4u\n&quot;</span>, <a id="a78" name="a78"></a><a class="code hl_function" href="cx16-heap_8h.html#a811d8321b5d842a9828226857afe108f">heap_alloc_count</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>), <a id="a79" name="a79"></a><a class="code hl_function" href="cx16-heap_8h.html#a262a69e33f10651b6b720df997457605">heap_free_count</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>), <a id="a80" name="a80"></a><a class="code hl_function" href="cx16-heap_8h.html#adc069e7d5450579b7644b3b4a2a4975e">heap_idle_count</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a81" name="a81"></a><a class="code hl_function" href="cx16-heap_8h.html#a99d902b76c26dc0c0a69a78c7ff3888a">heap_dump_index</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;list  heap:%05x free:%05x idle:%05x\n&quot;</span>, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<span class="charliteral">&#39;i&#39;</span>, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleList);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<span class="charliteral">&#39;f&#39;</span>, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeList);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a>(<span class="charliteral">&#39;h&#39;</span>, <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapList);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a id="a82" name="a82"></a><a class="code hl_function" href="cx16-heap_8h.html#ae1376b12ccb574411dc0bde4bed91b9d">heap_dump</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8h.html#a71a910219ddd5101f462040d248f0acc">heap_dump_stats</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>);</div>
<div class="line">    <a class="code hl_function" href="cx16-heap_8h.html#a99d902b76c26dc0c0a69a78c7ff3888a">heap_dump_index</a>(<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a> <a class="code hl_function" href="cx16-heap_8h.html#a19bd02c1e8449979b730bb5dfa9f5d21">heap_free_size</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a> = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeSize;</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a>)<a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a>&lt;&lt;3;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a> <a class="code hl_function" href="cx16-heap_8h.html#a9942ffaaeffde89b04ec43cd8e2133a1">heap_alloc_size</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a> = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeSize;</div>
<div class="line">    <a class="code hl_typedef" href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a> <a id="a83" name="a83"></a><a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#aef8b964e5aa0a73cc7beeae1c672c9eb">heapSize</a> = <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapSize;</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a>)(<a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#aef8b964e5aa0a73cc7beeae1c672c9eb">heapSize</a>-<a class="code hl_variable" href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">freeSize</a>)&lt;&lt;3;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> <a class="code hl_function" href="cx16-heap_8h.html#a811d8321b5d842a9828226857afe108f">heap_alloc_count</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;heapCount - <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeCount;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> <a class="code hl_function" href="cx16-heap_8h.html#a262a69e33f10651b6b720df997457605">heap_free_count</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;freeCount;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a> <a class="code hl_function" href="cx16-heap_8h.html#adc069e7d5450579b7644b3b4a2a4975e">heap_idle_count</a>(<a class="code hl_typedef" href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a> <a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>) {</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a>* <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a> = &amp;<a class="code hl_variable" href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a>[<a class="code hl_variable" href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a>];</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_variable" href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a>-&gt;idleCount;</div>
<div class="line">}</div>
<div class="ttc" id="acx16-heap-bram-fb_8h_html_a6b123f12359664b65ddbd9615b9a6e01"><div class="ttname"><a href="cx16-heap-bram-fb_8h.html#a6b123f12359664b65ddbd9615b9a6e01">heap_alloc</a></div><div class="ttdeci">heap_bram_fb_handle_t heap_alloc(heap_structure_t *self, uint16_t requested_size)</div><div class="ttdef"><b>Definition:</b> cx16-heap-bram-fb.c:285</div></div>
<div class="ttc" id="acx16-heap-bram-fb_8h_html_a8f801956d23b67723b1b266e6bbc8ab7"><div class="ttname"><a href="cx16-heap-bram-fb_8h.html#a8f801956d23b67723b1b266e6bbc8ab7">heap_list_insert</a></div><div class="ttdeci">heap_bram_fb_handle_t heap_list_insert(heap_bram_fb_handle_t *list, heap_bram_fb_handle_t index)</div><div class="ttdoc">Insert data of index in data list maintained by programmer. Note that the first elements of the data ...</div><div class="ttdef"><b>Definition:</b> cx16-heap-bram-fb.c:345</div></div>
<div class="ttc" id="acx16-heap-bram-fb_8h_html_ae8858350e85fd9f71aa054361d447037"><div class="ttname"><a href="cx16-heap-bram-fb_8h.html#ae8858350e85fd9f71aa054361d447037">heap_free</a></div><div class="ttdeci">void heap_free(heap_structure_t *self, heap_bram_fb_handle_t handle_free)</div><div class="ttdef"><b>Definition:</b> cx16-heap-bram-fb.c:297</div></div>
<div class="ttc" id="acx16-heap_8c_html_a108888791eb16584b78d5d8c6880dbd9"><div class="ttname"><a href="cx16-heap_8c.html#a108888791eb16584b78d5d8c6880dbd9">heap_prev_get</a></div><div class="ttdeci">vera_heap_handle_t heap_prev_get(vera_heap_handle_t handle)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:246</div></div>
<div class="ttc" id="acx16-heap_8c_html_a215901cc838a26e7e42df46b8a60ac39"><div class="ttname"><a href="cx16-heap_8c.html#a215901cc838a26e7e42df46b8a60ac39">vera_heap_size_packed_get</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_size_packed_get(vera_heap_handle_t heapIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:265</div></div>
<div class="ttc" id="acx16-heap_8c_html_a293a2602dc7cf6f2b29c9f1420ed27d9"><div class="ttname"><a href="cx16-heap_8c.html#a293a2602dc7cf6f2b29c9f1420ed27d9">heap_segments</a></div><div class="ttdeci">struct HEAP_SEGMENT heap_segments[16]</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:18</div></div>
<div class="ttc" id="acx16-heap_8c_html_a2f401ee9e8a8a1b40919cd92ea2117d9"><div class="ttname"><a href="cx16-heap_8c.html#a2f401ee9e8a8a1b40919cd92ea2117d9">heap_segment_init</a></div><div class="ttdeci">void heap_segment_init(struct HEAP_SEGMENT *s)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:692</div></div>
<div class="ttc" id="acx16-heap_8c_html_a30002853a7e0a144613a1e4c79e295fe"><div class="ttname"><a href="cx16-heap_8c.html#a30002853a7e0a144613a1e4c79e295fe">heap_index_add</a></div><div class="ttdeci">vera_heap_handle_t heap_index_add(struct HEAP_SEGMENT *s)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:456</div></div>
<div class="ttc" id="acx16-heap_8c_html_a3793be05f897d511214a01af772a3f26"><div class="ttname"><a href="cx16-heap_8c.html#a3793be05f897d511214a01af772a3f26">heap_header_find_free</a></div><div class="ttdeci">vera_heap_handle_t heap_header_find_free(struct HEAP_SEGMENT *s, vera_heap_size_packed_t sizeRequired)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:560</div></div>
<div class="ttc" id="acx16-heap_8c_html_a3d91c9d0b86435c944c8f8894347baab"><div class="ttname"><a href="cx16-heap_8c.html#a3d91c9d0b86435c944c8f8894347baab">heap_next_get</a></div><div class="ttdeci">vera_heap_handle_t heap_next_get(vera_heap_handle_t handle)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:238</div></div>
<div class="ttc" id="acx16-heap_8c_html_a3f088d483ab9b6078b74f5b4cc9a11d8"><div class="ttname"><a href="cx16-heap_8c.html#a3f088d483ab9b6078b74f5b4cc9a11d8">heap_can_coalesce_low</a></div><div class="ttdeci">vera_heap_handle_t heap_can_coalesce_low(struct HEAP_SEGMENT *s, vera_heap_handle_t index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:647</div></div>
<div class="ttc" id="acx16-heap_8c_html_a4309819103e63a675362df40166c61ad"><div class="ttname"><a href="cx16-heap_8c.html#a4309819103e63a675362df40166c61ad">heap_coalesce_high</a></div><div class="ttdeci">vera_heap_handle_t heap_coalesce_high(struct HEAP_SEGMENT *s, vera_heap_handle_t index, vera_heap_handle_t freeIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:622</div></div>
<div class="ttc" id="acx16-heap_8c_html_a4987d4b954c555b184aee545740ad105"><div class="ttname"><a href="cx16-heap_8c.html#a4987d4b954c555b184aee545740ad105">vera_heap_idle_insert</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_idle_insert(struct HEAP_SEGMENT *s, vera_heap_handle_t Index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:432</div></div>
<div class="ttc" id="acx16-heap_8c_html_a583320493b13deff76b3a1f523432317"><div class="ttname"><a href="cx16-heap_8c.html#a583320493b13deff76b3a1f523432317">heap_size_pack</a></div><div class="ttdeci">vera_heap_size_packed_t heap_size_pack(heap_size_large size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:115</div></div>
<div class="ttc" id="acx16-heap_8c_html_a61be93ce8957e936f1c58f905fcb8144"><div class="ttname"><a href="cx16-heap_8c.html#a61be93ce8957e936f1c58f905fcb8144">heap_header_add</a></div><div class="ttdeci">vera_heap_handle_t heap_header_add(struct HEAP_SEGMENT *s, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:483</div></div>
<div class="ttc" id="acx16-heap_8c_html_a6ad18917bb88e69baea31d4139eed62e"><div class="ttname"><a href="cx16-heap_8c.html#a6ad18917bb88e69baea31d4139eed62e">heap_idle_remove</a></div><div class="ttdeci">vera_heap_handle_t heap_idle_remove(struct HEAP_SEGMENT *s, vera_heap_handle_t Index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:440</div></div>
<div class="ttc" id="acx16-heap_8c_html_a6b858f8d297f636f4148eaae4b4d2f34"><div class="ttname"><a href="cx16-heap_8c.html#a6b858f8d297f636f4148eaae4b4d2f34">heap_size_unpack</a></div><div class="ttdeci">fb_heap_size_t heap_size_unpack(vera_heap_size_packed_t size_packed)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:125</div></div>
<div class="ttc" id="acx16-heap_8c_html_a77d15dd73e919e44ace3ef729a98df2a"><div class="ttname"><a href="cx16-heap_8c.html#a77d15dd73e919e44ace3ef729a98df2a">vera_heap_data_packed_get</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_data_packed_get(vera_heap_handle_t heapIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:142</div></div>
<div class="ttc" id="acx16-heap_8c_html_a7f875e4bf0bb65e4c3924e69df9fc156"><div class="ttname"><a href="cx16-heap_8c.html#a7f875e4bf0bb65e4c3924e69df9fc156">heap_next_set</a></div><div class="ttdeci">void heap_next_set(vera_heap_handle_t handle, vera_heap_handle_t next)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:219</div></div>
<div class="ttc" id="acx16-heap_8c_html_a816ba17a988728f4dd77f2866a48fbf1"><div class="ttname"><a href="cx16-heap_8c.html#a816ba17a988728f4dd77f2866a48fbf1">vera_heap_can_split_free</a></div><div class="ttdeci">vera_heap_size_packed_t vera_heap_can_split_free(vera_heap_handle_t freeHeap, vera_heap_size_packed_t sizeRequired)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:534</div></div>
<div class="ttc" id="acx16-heap_8c_html_a883c92155edcb20208f9e29f5dd0e82d"><div class="ttname"><a href="cx16-heap_8c.html#a883c92155edcb20208f9e29f5dd0e82d">heap_heap_insert_at</a></div><div class="ttdeci">vera_heap_handle_t heap_heap_insert_at(struct HEAP_SEGMENT *s, vera_heap_handle_t heapIndex, vera_heap_handle_t at, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:407</div></div>
<div class="ttc" id="acx16-heap_8c_html_a88b916ba335e97c1f676d65e8ef87198"><div class="ttname"><a href="cx16-heap_8c.html#a88b916ba335e97c1f676d65e8ef87198">heap_header_list_allocate</a></div><div class="ttdeci">vera_heap_handle_t heap_header_list_allocate(struct HEAP_SEGMENT *s, vera_heap_handle_t freeHeap, vera_heap_size_packed_t sizeRequired)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:542</div></div>
<div class="ttc" id="acx16-heap_8c_html_a89612d095562858164c8b6b39211094e"><div class="ttname"><a href="cx16-heap_8c.html#a89612d095562858164c8b6b39211094e">heap_coalesce_low</a></div><div class="ttdeci">vera_heap_handle_t heap_coalesce_low(struct HEAP_SEGMENT *s, vera_heap_handle_t freeIndex, vera_heap_handle_t index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:596</div></div>
<div class="ttc" id="acx16-heap_8c_html_a969a7c774293cd48e76d3959662a1a96"><div class="ttname"><a href="cx16-heap_8c.html#a969a7c774293cd48e76d3959662a1a96">cx16_bram_unpack_bank</a></div><div class="ttdeci">cx16_bank cx16_bram_unpack_bank(cx16_bram_packed bram_packed)</div></div>
<div class="ttc" id="acx16-heap_8c_html_a9b6b3da4fb38bd95c2ef852824c07403"><div class="ttname"><a href="cx16-heap_8c.html#a9b6b3da4fb38bd95c2ef852824c07403">cx16_bram_pack</a></div><div class="ttdeci">heap_bram_packed cx16_bram_pack(cx16_bank bank, cx16_ptr ptr)</div></div>
<div class="ttc" id="acx16-heap_8c_html_aa37fd55a77663ef2e754c8a3da5d9929"><div class="ttname"><a href="cx16-heap_8c.html#aa37fd55a77663ef2e754c8a3da5d9929">heap_prev_set</a></div><div class="ttdeci">void heap_prev_set(vera_heap_handle_t handle, vera_heap_handle_t prev)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:228</div></div>
<div class="ttc" id="acx16-heap_8c_html_aa4418ea7cc28d14549aa5035e2ba2e18"><div class="ttname"><a href="cx16-heap_8c.html#aa4418ea7cc28d14549aa5035e2ba2e18">vera_heap_index_find</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_index_find(vera_heap_handle_t list, vera_heap_handle_t index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:283</div></div>
<div class="ttc" id="acx16-heap_8c_html_aad1c81df3ee2ee67a8c2d21a3b837e04"><div class="ttname"><a href="cx16-heap_8c.html#aad1c81df3ee2ee67a8c2d21a3b837e04">vera_heap_free_remove</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_free_remove(struct HEAP_SEGMENT *s, vera_heap_handle_t freeIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:427</div></div>
<div class="ttc" id="acx16-heap_8c_html_ab81a49aa9af85530c2eeff677d078d11"><div class="ttname"><a href="cx16-heap_8c.html#ab81a49aa9af85530c2eeff677d078d11">heap_heap_remove</a></div><div class="ttdeci">vera_heap_handle_t heap_heap_remove(struct HEAP_SEGMENT *s, vera_heap_handle_t heapIndex)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:414</div></div>
<div class="ttc" id="acx16-heap_8c_html_ac02b19e36c6829070681df1528f7c3a3"><div class="ttname"><a href="cx16-heap_8c.html#ac02b19e36c6829070681df1528f7c3a3">vera_heap_get</a></div><div class="ttdeci">heap_index_ptr vera_heap_get(vera_heap_handle_t handle)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:132</div></div>
<div class="ttc" id="acx16-heap_8c_html_ac1836fbdad070347161953c8e7696b3d"><div class="ttname"><a href="cx16-heap_8c.html#ac1836fbdad070347161953c8e7696b3d">heap_free_insert</a></div><div class="ttdeci">vera_heap_handle_t heap_free_insert(struct HEAP_SEGMENT *s, vera_heap_handle_t freeIndex, vera_heap_handle_t data, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:419</div></div>
<div class="ttc" id="acx16-heap_8c_html_ac5c3dc57367bbb66d473c214be92c018"><div class="ttname"><a href="cx16-heap_8c.html#ac5c3dc57367bbb66d473c214be92c018">heap_size_packed_set</a></div><div class="ttdeci">void heap_size_packed_set(vera_heap_handle_t heapIndex, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:254</div></div>
<div class="ttc" id="acx16-heap_8c_html_ac902874d357e29150c04011f014f3192"><div class="ttname"><a href="cx16-heap_8c.html#ac902874d357e29150c04011f014f3192">cx16_vram_pack</a></div><div class="ttdeci">cx16_vram_packed cx16_vram_pack(cx16_bank bank, cx16_offset offset)</div></div>
<div class="ttc" id="acx16-heap_8c_html_ace30bce89c39bb165fcdcd628d5462c1"><div class="ttname"><a href="cx16-heap_8c.html#ace30bce89c39bb165fcdcd628d5462c1">heap_list_insert_at</a></div><div class="ttdeci">vera_heap_handle_t heap_list_insert_at(vera_heap_handle_t *list, vera_heap_handle_t index, vera_heap_handle_t at)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:306</div></div>
<div class="ttc" id="acx16-heap_8c_html_ad3a72919ae742a6e876f9eeb36e95c80"><div class="ttname"><a href="cx16-heap_8c.html#ad3a72919ae742a6e876f9eeb36e95c80">heap_print_bram</a></div><div class="ttdeci">void heap_print_bram(char prefix, vera_heap_handle_t list)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:958</div></div>
<div class="ttc" id="acx16-heap_8c_html_ada4896b02c851f3a923c200bbe508260"><div class="ttname"><a href="cx16-heap_8c.html#ada4896b02c851f3a923c200bbe508260">heap_header_find</a></div><div class="ttdeci">vera_heap_handle_t heap_header_find(struct HEAP_SEGMENT *s, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:687</div></div>
<div class="ttc" id="acx16-heap_8c_html_adafc2960cafd670f4d4d2a5693ef0fc3"><div class="ttname"><a href="cx16-heap_8c.html#adafc2960cafd670f4d4d2a5693ef0fc3">cx16_vram_unpack_bank</a></div><div class="ttdeci">cx16_bank cx16_vram_unpack_bank(cx16_vram_packed vram_packed)</div></div>
<div class="ttc" id="acx16-heap_8c_html_adfc0e7d37b3d24656c5751a7b3730642"><div class="ttname"><a href="cx16-heap_8c.html#adfc0e7d37b3d24656c5751a7b3730642">heap_heap_insert</a></div><div class="ttdeci">vera_heap_handle_t heap_heap_insert(struct HEAP_SEGMENT *s, vera_heap_handle_t heapIndex, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:400</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae1675fdcdd510e647daf8c925d05123d"><div class="ttname"><a href="cx16-heap_8c.html#ae1675fdcdd510e647daf8c925d05123d">vera_heap_data_packed_set</a></div><div class="ttdeci">void vera_heap_data_packed_set(vera_heap_handle_t heapIndex, vera_heap_handle_t data)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:151</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae46d850700331194e593e53157948003"><div class="ttname"><a href="cx16-heap_8c.html#ae46d850700331194e593e53157948003">vera_heap_dump_index_print</a></div><div class="ttdeci">void vera_heap_dump_index_print(char prefix, vera_heap_handle_t list)</div><div class="ttdoc">Print an index list.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:988</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae5a8885c1c7e8b3ac215274211401d33"><div class="ttname"><a href="cx16-heap_8c.html#ae5a8885c1c7e8b3ac215274211401d33">cx16_bram_unpack_ptr</a></div><div class="ttdeci">cx16_ptr cx16_bram_unpack_ptr(cx16_bram_packed bram_packed)</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae7775332be17fc18c96e8f35a2410802"><div class="ttname"><a href="cx16-heap_8c.html#ae7775332be17fc18c96e8f35a2410802">cx16_vram_unpack_offset</a></div><div class="ttdeci">cx16_offset cx16_vram_unpack_offset(cx16_vram_packed vram_packed)</div></div>
<div class="ttc" id="acx16-heap_8c_html_ae9378a99d0a49522a6715be5900c9f93"><div class="ttname"><a href="cx16-heap_8c.html#ae9378a99d0a49522a6715be5900c9f93">vera_heap_header_split</a></div><div class="ttdeci">vera_heap_handle_t vera_heap_header_split(struct HEAP_SEGMENT *s, vera_heap_handle_t freeHeap, vera_heap_size_packed_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:509</div></div>
<div class="ttc" id="acx16-heap_8c_html_af676409759ce94ac0744c73d481ceee0"><div class="ttname"><a href="cx16-heap_8c.html#af676409759ce94ac0744c73d481ceee0">heap_can_coalesce_high</a></div><div class="ttdeci">vera_heap_handle_t heap_can_coalesce_high(struct HEAP_SEGMENT *s, vera_heap_handle_t index)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:667</div></div>
<div class="ttc" id="acx16-heap_8c_html_af984bf6b0bedb6ecdb6220bee7dad544"><div class="ttname"><a href="cx16-heap_8c.html#af984bf6b0bedb6ecdb6220bee7dad544">heap_alloc_size_get</a></div><div class="ttdeci">vera_heap_size_packed_t heap_alloc_size_get(fb_heap_size_t size)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:451</div></div>
<div class="ttc" id="acx16-heap_8h_html"><div class="ttname"><a href="cx16-heap_8h.html">cx16-heap.h</a></div><div class="ttdoc">Commander x16 memory manager.</div></div>
<div class="ttc" id="acx16-heap_8h_html_a03a67c4f3a1ae64cdc9b54974faab675"><div class="ttname"><a href="cx16-heap_8h.html#a03a67c4f3a1ae64cdc9b54974faab675">heap_count</a></div><div class="ttdeci">unsigned int heap_count</div><div class="ttdoc">Counters.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:24</div></div>
<div class="ttc" id="acx16-heap_8h_html_a0946a4292d339db7ad134087a4c02cde"><div class="ttname"><a href="cx16-heap_8h.html#a0946a4292d339db7ad134087a4c02cde">heap_data_bank</a></div><div class="ttdeci">fb_heap_bank_t heap_data_bank(vera_heap_handle_t handle)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:172</div></div>
<div class="ttc" id="acx16-heap_8h_html_a1591673749155051c96f58bad3e87b87"><div class="ttname"><a href="cx16-heap_8h.html#a1591673749155051c96f58bad3e87b87">heap_data_get</a></div><div class="ttdeci">vera_heap_handle_t heap_data_get(vera_heap_handle_t indexHeap)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:159</div></div>
<div class="ttc" id="acx16-heap_8h_html_a19bd02c1e8449979b730bb5dfa9f5d21"><div class="ttname"><a href="cx16-heap_8h.html#a19bd02c1e8449979b730bb5dfa9f5d21">heap_free_size</a></div><div class="ttdeci">heap_size_large heap_free_size(heap_segment Segment)</div><div class="ttdoc">Return the size of allocated heap records of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1046</div></div>
<div class="ttc" id="acx16-heap_8h_html_a1b21d5a7e288413fa7351f5bdbd25ffe"><div class="ttname"><a href="cx16-heap_8h.html#a1b21d5a7e288413fa7351f5bdbd25ffe">fb_heap_size_t</a></div><div class="ttdeci">unsigned int fb_heap_size_t</div><div class="ttdoc">The size in real buytes, max word size.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:22</div></div>
<div class="ttc" id="acx16-heap_8h_html_a1bd2b521a63cb5d33664a103a8387d73"><div class="ttname"><a href="cx16-heap_8h.html#a1bd2b521a63cb5d33664a103a8387d73">vera_heap_size_packed_t</a></div><div class="ttdeci">unsigned int vera_heap_size_packed_t</div><div class="ttdoc">The size packed in a word, shifted 3 bits to the right.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:21</div></div>
<div class="ttc" id="acx16-heap_8h_html_a1fb45efeb18336657f3c31fd4576dbaf"><div class="ttname"><a href="cx16-heap_8h.html#a1fb45efeb18336657f3c31fd4576dbaf">heap_ptr</a></div><div class="ttdeci">unsigned char * heap_ptr</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:26</div></div>
<div class="ttc" id="acx16-heap_8h_html_a22424b858c9effded4dd94b35ccccdb2"><div class="ttname"><a href="cx16-heap_8h.html#a22424b858c9effded4dd94b35ccccdb2">fb_heap_bank_t</a></div><div class="ttdeci">unsigned char fb_heap_bank_t</div><div class="ttdoc">A bank representation for banked ram or banked vera ram.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:17</div></div>
<div class="ttc" id="acx16-heap_8h_html_a262a69e33f10651b6b720df997457605"><div class="ttname"><a href="cx16-heap_8h.html#a262a69e33f10651b6b720df997457605">heap_free_count</a></div><div class="ttdeci">unsigned int heap_free_count(heap_segment Segment)</div><div class="ttdoc">Return the amount of free records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1082</div></div>
<div class="ttc" id="acx16-heap_8h_html_a28995fc62d36266fb058c2d36cdd785e"><div class="ttname"><a href="cx16-heap_8h.html#a28995fc62d36266fb058c2d36cdd785e">heap_size_mask</a></div><div class="ttdeci">const unsigned int heap_size_mask</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:49</div></div>
<div class="ttc" id="acx16-heap_8h_html_a2983e45d51f938bc96bedce171758daf"><div class="ttname"><a href="cx16-heap_8h.html#a2983e45d51f938bc96bedce171758daf">heap_segment_vram_ceil</a></div><div class="ttdeci">heap_address heap_segment_vram_ceil(heap_segment Segment, cx16_vram_packed HeapCeilVram, vera_heap_size_packed_t HeapSizeVram, cx16_bram_packed HeaderFloorBram, vera_heap_size_packed_t HeaderSizeBram)</div></div>
<div class="ttc" id="acx16-heap_8h_html_a31ba0839f110bfacb0cc194e1c3cddf9"><div class="ttname"><a href="cx16-heap_8h.html#a31ba0839f110bfacb0cc194e1c3cddf9">heap_segment_bram</a></div><div class="ttdeci">heap_address heap_segment_bram(heap_segment Segment, cx16_vram_packed HeapFloorBram, vera_heap_size_packed_t HeapSizeBram)</div></div>
<div class="ttc" id="acx16-heap_8h_html_a391536b75bdeb026f29ec60d3e59e3f1"><div class="ttname"><a href="cx16-heap_8h.html#a391536b75bdeb026f29ec60d3e59e3f1">heap_type_mask</a></div><div class="ttdeci">const unsigned int heap_type_mask</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:32</div></div>
<div class="ttc" id="acx16-heap_8h_html_a429e810cb6d47aa4975e70e8f31b7bbe"><div class="ttname"><a href="cx16-heap_8h.html#a429e810cb6d47aa4975e70e8f31b7bbe">heap_offset</a></div><div class="ttdeci">unsigned int heap_offset</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:27</div></div>
<div class="ttc" id="acx16-heap_8h_html_a57da669324607a311f40623c223bb39b"><div class="ttname"><a href="cx16-heap_8h.html#a57da669324607a311f40623c223bb39b">heap_segment_vram_floor</a></div><div class="ttdeci">heap_address heap_segment_vram_floor(heap_segment Segment, cx16_vram_packed HeapFloorVram, vera_heap_size_packed_t HeapSizeVram, cx16_bram_packed HeaderFloorBram, vera_heap_size_packed_t HeaderSizeBram)</div></div>
<div class="ttc" id="acx16-heap_8h_html_a6044e9ccdc5e091b511e0cd920ff7fb9"><div class="ttname"><a href="cx16-heap_8h.html#a6044e9ccdc5e091b511e0cd920ff7fb9">heap_vram_unpack_bank</a></div><div class="ttdeci">fb_heap_bank_t heap_vram_unpack_bank(cx16_vram_packed vram_packed)</div></div>
<div class="ttc" id="acx16-heap_8h_html_a6cdfac7a61ee36d9c31b9e7ec94e79a4"><div class="ttname"><a href="cx16-heap_8h.html#a6cdfac7a61ee36d9c31b9e7ec94e79a4">heap_segment_vram_floor_ulong</a></div><div class="ttdeci">dword heap_segment_vram_floor_ulong(struct HEAP_SEGMENT *Segment)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:31</div></div>
<div class="ttc" id="acx16-heap_8h_html_a71a910219ddd5101f462040d248f0acc"><div class="ttname"><a href="cx16-heap_8h.html#a71a910219ddd5101f462040d248f0acc">heap_dump_stats</a></div><div class="ttdeci">void heap_dump_stats(heap_segment Segment)</div><div class="ttdoc">Print the heap memory manager statistics of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1007</div></div>
<div class="ttc" id="acx16-heap_8h_html_a747976eee86b967a876b82355df75721"><div class="ttname"><a href="cx16-heap_8h.html#a747976eee86b967a876b82355df75721">heap_vram_packed</a></div><div class="ttdeci">unsigned int heap_vram_packed</div><div class="ttdoc">Packed pointer to a location in banked vera ram.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:16</div></div>
<div class="ttc" id="acx16-heap_8h_html_a7997df5dc4b0113b58e80cbd6bd19d61"><div class="ttname"><a href="cx16-heap_8h.html#a7997df5dc4b0113b58e80cbd6bd19d61">heap_bram_pack</a></div><div class="ttdeci">heap_bram_packed heap_bram_pack(cx16_bank bank, cx16_ptr ptr)</div></div>
<div class="ttc" id="acx16-heap_8h_html_a7b97ae4206ec8f0fdeb4e1dd9aa304b1"><div class="ttname"><a href="cx16-heap_8h.html#a7b97ae4206ec8f0fdeb4e1dd9aa304b1">heap_index_info</a></div><div class="ttdeci">unsigned int heap_index_info</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:25</div></div>
<div class="ttc" id="acx16-heap_8h_html_a7e138b83d286644c1fc1f907d2b5a320"><div class="ttname"><a href="cx16-heap_8h.html#a7e138b83d286644c1fc1f907d2b5a320">vera_heap_handle_t</a></div><div class="ttdeci">unsigned int vera_heap_handle_t</div><div class="ttdoc">Generic handle for heap references.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:20</div></div>
<div class="ttc" id="acx16-heap_8h_html_a7f3dea2d3ca93b23b380c77744f18fa0"><div class="ttname"><a href="cx16-heap_8h.html#a7f3dea2d3ca93b23b380c77744f18fa0">heap_bram_packed</a></div><div class="ttdeci">unsigned int heap_bram_packed</div><div class="ttdoc">Packed pointer to a location in banked ram between A000 and C000.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:15</div></div>
<div class="ttc" id="acx16-heap_8h_html_a811d8321b5d842a9828226857afe108f"><div class="ttname"><a href="cx16-heap_8h.html#a811d8321b5d842a9828226857afe108f">heap_alloc_count</a></div><div class="ttdeci">unsigned int heap_alloc_count(heap_segment Segment)</div><div class="ttdoc">Return the amount of heap records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1071</div></div>
<div class="ttc" id="acx16-heap_8h_html_a86c575d293c21b3cb40c4e95ea3eb85a"><div class="ttname"><a href="cx16-heap_8h.html#a86c575d293c21b3cb40c4e95ea3eb85a">heap_segment</a></div><div class="ttdeci">unsigned char heap_segment</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:76</div></div>
<div class="ttc" id="acx16-heap_8h_html_a9942ffaaeffde89b04ec43cd8e2133a1"><div class="ttname"><a href="cx16-heap_8h.html#a9942ffaaeffde89b04ec43cd8e2133a1">heap_alloc_size</a></div><div class="ttdeci">heap_size_large heap_alloc_size(heap_segment Segment)</div><div class="ttdoc">Return the size of allocated heap records of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1058</div></div>
<div class="ttc" id="acx16-heap_8h_html_a99d902b76c26dc0c0a69a78c7ff3888a"><div class="ttname"><a href="cx16-heap_8h.html#a99d902b76c26dc0c0a69a78c7ff3888a">heap_dump_index</a></div><div class="ttdeci">void heap_dump_index(heap_segment Segment)</div><div class="ttdoc">Ddump the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1019</div></div>
<div class="ttc" id="acx16-heap_8h_html_aa37bd601b7ef25d85a41ca1a54cfe35e"><div class="ttname"><a href="cx16-heap_8h.html#aa37bd601b7ef25d85a41ca1a54cfe35e">heap_size_large</a></div><div class="ttdeci">unsigned long heap_size_large</div><div class="ttdoc">The size in real buytes, max dword size.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:23</div></div>
<div class="ttc" id="acx16-heap_8h_html_ac5f4d22119a6f60f95df03173ef94e5c"><div class="ttname"><a href="cx16-heap_8h.html#ac5f4d22119a6f60f95df03173ef94e5c">heap_type_bram</a></div><div class="ttdeci">const unsigned int heap_type_bram</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:30</div></div>
<div class="ttc" id="acx16-heap_8h_html_ac91e06c654ba100c2c52d45617d5b41d"><div class="ttname"><a href="cx16-heap_8h.html#ac91e06c654ba100c2c52d45617d5b41d">heap_type_vram</a></div><div class="ttdeci">const unsigned int heap_type_vram</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:31</div></div>
<div class="ttc" id="acx16-heap_8h_html_acbcfab14fcf5ab528c7c2b122d01e90f"><div class="ttname"><a href="cx16-heap_8h.html#acbcfab14fcf5ab528c7c2b122d01e90f">heap_data_ptr</a></div><div class="ttdeci">heap_ptr heap_data_ptr(vera_heap_handle_t handle)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:197</div></div>
<div class="ttc" id="acx16-heap_8h_html_acd2aa89ed34699981fcbec36423a72cd"><div class="ttname"><a href="cx16-heap_8h.html#acd2aa89ed34699981fcbec36423a72cd">heap_vram_unpack_offset</a></div><div class="ttdeci">heap_offset heap_vram_unpack_offset(cx16_vram_packed vram_packed)</div></div>
<div class="ttc" id="acx16-heap_8h_html_ad89210fa68357b828a07d684f309915b"><div class="ttname"><a href="cx16-heap_8h.html#ad89210fa68357b828a07d684f309915b">heap_bram_unpack_bank</a></div><div class="ttdeci">fb_heap_bank_t heap_bram_unpack_bank(cx16_bram_packed bram_packed)</div></div>
<div class="ttc" id="acx16-heap_8h_html_adc069e7d5450579b7644b3b4a2a4975e"><div class="ttname"><a href="cx16-heap_8h.html#adc069e7d5450579b7644b3b4a2a4975e">heap_idle_count</a></div><div class="ttdeci">unsigned int heap_idle_count(heap_segment Segment)</div><div class="ttdoc">Return the amount of idle records in the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1093</div></div>
<div class="ttc" id="acx16-heap_8h_html_adc1c62fc70ce21ffa54e455049044a02"><div class="ttname"><a href="cx16-heap_8h.html#adc1c62fc70ce21ffa54e455049044a02">heap_vram_pack</a></div><div class="ttdeci">heap_vram_packed heap_vram_pack(cx16_bank bank, cx16_offset offset)</div></div>
<div class="ttc" id="acx16-heap_8h_html_add5189addf1dcf929ab4b9d72bdd802b"><div class="ttname"><a href="cx16-heap_8h.html#add5189addf1dcf929ab4b9d72bdd802b">heap_bram_unpack_ptr</a></div><div class="ttdeci">heap_ptr heap_bram_unpack_ptr(cx16_bram_packed bram_packed)</div></div>
<div class="ttc" id="acx16-heap_8h_html_adf788b6b721333705c60aa63657c6bbe"><div class="ttname"><a href="cx16-heap_8h.html#adf788b6b721333705c60aa63657c6bbe">heap_address</a></div><div class="ttdeci">unsigned int heap_address</div><div class="ttdoc">Represents an address.</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:19</div></div>
<div class="ttc" id="acx16-heap_8h_html_ae1376b12ccb574411dc0bde4bed91b9d"><div class="ttname"><a href="cx16-heap_8h.html#ae1376b12ccb574411dc0bde4bed91b9d">heap_dump</a></div><div class="ttdeci">void heap_dump(heap_segment Segment)</div><div class="ttdoc">Print the heap memory manager statistics and dump the index of the segment.</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:1033</div></div>
<div class="ttc" id="acx16-heap_8h_html_af17a694d1e1e3be270c48eac45507ccf"><div class="ttname"><a href="cx16-heap_8h.html#af17a694d1e1e3be270c48eac45507ccf">heap_size_get</a></div><div class="ttdeci">vera_heap_size_packed_t heap_size_get(vera_heap_handle_t indexHeap)</div><div class="ttdef"><b>Definition:</b> cx16-heap.c:273</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_aa0d6c2d0760a5f3e3d3c3c9aa038a514"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#aa0d6c2d0760a5f3e3d3c3c9aa038a514">segment</a></div><div class="ttdeci">vera_heap_segment_index_t segment</div><div class="ttdef"><b>Definition:</b> cx16-veraheap copy.c:22</div></div>
<div class="ttc" id="acx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h_html_ae181d55ff8f1c3a076129b88e119f396"><div class="ttname"><a href="cx16-veraheap-_t_a_b_l_e_t-_s_v_e_n_8h.html#ae181d55ff8f1c3a076129b88e119f396">vera_heap_list_remove</a></div><div class="ttdeci">vera_heap_index_t vera_heap_list_remove(vera_heap_segment_index_t s, vera_heap_index_t list, vera_heap_index_t index)</div><div class="ttdef"><b>Definition:</b> cx16-veraheap.c:225</div></div>
<div class="ttc" id="acx16-veraheap__test__zeropage_8c_html_ab60c984999c1ee6b14a84d568194342a"><div class="ttname"><a href="cx16-veraheap__test__zeropage_8c.html#ab60c984999c1ee6b14a84d568194342a">s</a></div><div class="ttdeci">vera_heap_segment_index_t s</div><div class="ttdef"><b>Definition:</b> cx16-veraheap_test_zeropage.c:5</div></div>
<div class="ttc" id="acx16-veralib_8h_html"><div class="ttname"><a href="cx16-veralib_8h.html">cx16-veralib.h</a></div><div class="ttdoc">Commander X16 vera library for the kickc compiler. Commander X16 VERA (Versatile Embedded Retro Adapt...</div></div>
<div class="ttc" id="aequinoxe-bin-sprites_8c_html_ab49a690d1ad348f93de0edd04e8224f9"><div class="ttname"><a href="equinoxe-bin-sprites_8c.html#ab49a690d1ad348f93de0edd04e8224f9">header</a></div><div class="ttdeci">__export char header[]</div><div class="ttdef"><b>Definition:</b> equinoxe-bin-sprites.c:6</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html">HEAP_INDEX</a></div><div class="ttdef"><b>Definition:</b> cx16-heap.h:84</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html_a837bdab71c511397ce2fbee9101301a5"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html#a837bdab71c511397ce2fbee9101301a5">HEAP_INDEX::size</a></div><div class="ttdeci">vera_heap_size_packed_t size</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:86</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html_a8fdfc43dc3039e85e571e3d81d3aa780"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html#a8fdfc43dc3039e85e571e3d81d3aa780">HEAP_INDEX::prev</a></div><div class="ttdeci">vera_heap_handle_t prev</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:88</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html_a977617d98de9b979d30f285815d92168"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html#a977617d98de9b979d30f285815d92168">HEAP_INDEX::next</a></div><div class="ttdeci">vera_heap_handle_t next</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:87</div></div>
<div class="ttc" id="astruct_h_e_a_p___i_n_d_e_x_html_af0af75de8eff3270f0a8e9132aac7224"><div class="ttname"><a href="struct_h_e_a_p___i_n_d_e_x.html#af0af75de8eff3270f0a8e9132aac7224">HEAP_INDEX::data</a></div><div class="ttdeci">vera_heap_handle_t data</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:85</div></div>
<div class="ttc" id="astruct_h_e_a_p___s_e_g_m_e_n_t_html"><div class="ttname"><a href="struct_h_e_a_p___s_e_g_m_e_n_t.html">HEAP_SEGMENT</a></div><div class="ttdef"><b>Definition:</b> cx16-heap.h:51</div></div>
<div class="ttc" id="astruct_h_e_a_p___s_e_g_m_e_n_t_html_ab45b93bc7847edebf6a8b2c2f2e5771f"><div class="ttname"><a href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab45b93bc7847edebf6a8b2c2f2e5771f">HEAP_SEGMENT::freeSize</a></div><div class="ttdeci">unsigned int freeSize</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:73</div></div>
<div class="ttc" id="astruct_h_e_a_p___s_e_g_m_e_n_t_html_ab4ae2afa49139b05457624cf4727757f"><div class="ttname"><a href="struct_h_e_a_p___s_e_g_m_e_n_t.html#ab4ae2afa49139b05457624cf4727757f">HEAP_SEGMENT::HeaderPosition</a></div><div class="ttdeci">vera_heap_handle_t HeaderPosition</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:66</div></div>
<div class="ttc" id="astruct_h_e_a_p___s_e_g_m_e_n_t_html_aef8b964e5aa0a73cc7beeae1c672c9eb"><div class="ttname"><a href="struct_h_e_a_p___s_e_g_m_e_n_t.html#aef8b964e5aa0a73cc7beeae1c672c9eb">HEAP_SEGMENT::heapSize</a></div><div class="ttdeci">unsigned int heapSize</div><div class="ttdef"><b>Definition:</b> cx16-heap.h:72</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
